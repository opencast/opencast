{
  "definitions": {
    "definition": [
      {
        "id": "partial-error",
        "tags": "",
        "description": "Cleanup after a processing failure",
        "displayOrder": 0,
        "published": false,
        "operations": {
          "operation": [
            {
              "id": "comment",
              "description": "Mark the recording for cutting",
              "fail-on-error": "false",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "reason",
                    "$": "EVENTS.EVENTS.DETAILS.COMMENTS.REASONS.PROCESSING_FAILURE"
                  },
                  {
                    "key": "action",
                    "$": "create"
                  },
                  {
                    "key": "description",
                    "$": "Processing failed"
                  }
                ]
              }
            },
            {
              "id": "snapshot",
              "description": "Preserve the current recording state",
              "fail-on-error": "false",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-flavors",
                  "$": "*/source,dublincore/*"
                }
              }
            },
            {
              "id": "cleanup",
              "description": "Cleaning up",
              "fail-on-error": "false",
              "max-attempts": "1",
              "retry-strategy": "none"
            }
          ]
        }
      },
      {
        "id": "partial-cleanup",
        "tags": "",
        "description": "Cleanup after processing",
        "displayOrder": 0,
        "published": false,
        "operations": {
          "operation": {
            "id": "cleanup",
            "description": "Remove temporary processing artifacts",
            "fail-on-error": "false",
            "max-attempts": "1",
            "retry-strategy": "none",
            "configurations": {
              "configuration": [
                {
                  "key": "delete-external",
                  "$": "true"
                },
                {
                  "key": "preserve-flavors",
                  "$": "security/*"
                }
              ]
            }
          }
        }
      },
      {
        "id": "attach-watson-transcripts",
        "title": "Attach caption/transcripts generated by IBM Watson",
        "tags": "",
        "description": "Attach automated transcription generated by the IBM\n    Watson service. This is an internal workflow, started by the\n    Transcription Service.\n  ",
        "displayOrder": 0,
        "published": false,
        "configuration_panel": "",
        "operations": {
          "operation": [
            {
              "id": "attach-watson-transcription",
              "description": "Attach captions/transcription",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "transcription-job-id",
                    "$": "${transcriptionJobId}"
                  },
                  {
                    "key": "target-tag",
                    "$": "engage-download"
                  },
                  {
                    "key": "target-caption-format",
                    "$": "vtt"
                  }
                ]
              }
            },
            {
              "id": "publish-engage",
              "description": "Distribute and publish to engage server",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "check-availability",
                    "$": "true"
                  },
                  {
                    "key": "download-source-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "strategy",
                    "$": "merge"
                  }
                ]
              }
            },
            {
              "id": "snapshot",
              "description": "Archive media package",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-flavors",
                  "$": "*/*"
                }
              }
            },
            {
              "id": "include",
              "description": "Remove temporary processing artifacts",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-cleanup"
                }
              }
            }
          ]
        }
      },
      {
        "id": "duplicate-event",
        "title": "Duplicate Event",
        "tags": {
          "tag": "archive"
        },
        "description": "",
        "displayOrder": 10,
        "published": false,
        "configuration_panel": "\n    \n      <div id=\"workflow-configuration\">\n        <fieldset>\n          <input\n            id=\"numberOfEvents\"\n            name=\"numberOfEvents\"\n            type=\"number\"\n            class=\"configField\"\n            onkeypress=\"return event.charCode > 47\"\n            oninput=\"checkValueInBounds()\"\n            min=\"1\"\n            value=\"1\"\n            max=\"25\"\n            />\n          <label for=\"numberOfEvents\">Number of Events</label>\n        </fieldset>\n      </div>\n\n      <script type=\"text/javascript\">\n        function checkValueInBounds() {\n          var value = $('#numberOfEvents').val();\n          var max = $('#numberOfEvents').attr('max');\n          var min = $('#numberOfEvents').attr('min');\n          if (parseInt(value) < parseInt(min)) $('#numberOfEvents').val(min);\n          if (parseInt(value) > parseInt(max)) $('#numberOfEvents').val(max);\n        }\n      </script>\n    \n  ",
        "operations": {
          "operation": [
            {
              "id": "duplicate-event",
              "description": "Duplicate Event",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "property-namespaces",
                    "$": "org.opencastproject.assetmanager.security"
                  },
                  {
                    "key": "source-flavors",
                    "$": "*/*"
                  },
                  {
                    "key": "target-tags"
                  },
                  {
                    "key": "number-of-events",
                    "$": "${numberOfEvents}"
                  },
                  {
                    "key": "copy-number-prefix",
                    "$": "copy"
                  }
                ]
              }
            },
            {
              "id": "include",
              "description": "Remove temporary processing artifacts",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-cleanup"
                }
              }
            }
          ]
        }
      },
      {
        "id": "fast",
        "title": "Fast Testing Workflow",
        "tags": {
          "tag": [
            "schedule",
            "upload"
          ]
        },
        "description": "\n    A minimal workflow that transcodes the media into distribution formats, then\n    sends the resulting distribution files, along with their associated metadata,\n    to the distribution channels.\n  ",
        "displayOrder": 1,
        "published": false,
        "configuration_panel": "\n    \n      <div id=\"workflow-configuration\">\n        <fieldset>\n          <legend>Add a comment that the recording needs:</legend>\n          <ul>\n            <li>\n              <input id=\"comment\" name=\"comment\" type=\"checkbox\" class=\"configField\" value=\"true\" />\n              <label for=\"comment\">Review / Cutting</label>\n            </li>\n          </ul>\n        </fieldset>\n        <fieldset>\n          <legend>Immediately distribute the recording to:</legend>\n          <ul>\n            <li>\n              <input id=\"publishToMediaModule\" name=\"publishToMediaModule\" type=\"checkbox\" class=\"configField\" value=\"true\" checked=checked />\n              <label for=\"publishToMediaModule\">Opencast Media Module</label>\n            </li>\n            <li>\n              <input id=\"publishToOaiPmh\" name=\"publishToOaiPmh\" type=\"checkbox\" class=\"configField\" value=\"true\" checked=checked />\n              <label for=\"publishToOaiPmh\">Default OAI-PMH Repository</label>\n            </li>\n          </ul>\n        </fieldset>\n        <fieldset>\n          <legend>Publish live stream:</legend>\n          <ul>\n            <li>\n              <input id=\"publishLive\" name=\"publishLive\" type=\"checkbox\" class=\"configField\" value=\"false\" />\n              <label for=\"publishLive\">Add live event to Opencast Media Module</label>\n            </li>\n          </ul>\n        </fieldset>\n      </div>\n    \n  ",
        "operations": {
          "operation": [
            {
              "id": "defaults",
              "description": "Applying default configuration values",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "publishLive",
                    "$": "false"
                  },
                  {
                    "key": "publishToOaiPmh",
                    "$": "true"
                  },
                  {
                    "key": "comment",
                    "$": "false"
                  },
                  {
                    "key": "publishToMediaModule",
                    "$": "true"
                  },
                  {
                    "key": "uploadedSearchPreview",
                    "$": "false"
                  }
                ]
              }
            },
            {
              "id": "series",
              "description": "Applying access control entries from series",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "apply-acl",
                  "$": "true"
                }
              }
            },
            {
              "id": "tag",
              "description": "Tagging media package elements for archival",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavors",
                    "$": "*/*"
                  },
                  {
                    "key": "target-tags",
                    "$": "+archive"
                  }
                ]
              }
            },
            {
              "id": "tag",
              "description": "Tagging uploaded assets for distribution",
              "fail-on-error": "true",
              "if": "${downloadSourceflavorsExist}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavors",
                    "$": "${download-source-flavors}"
                  },
                  {
                    "key": "target-tags",
                    "$": "+engage-download"
                  }
                ]
              }
            },
            {
              "id": "inspect",
              "description": "Inspecting audio and video streams",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "accept-no-media",
                    "$": "false"
                  },
                  {
                    "key": "overwrite",
                    "$": "false"
                  }
                ]
              }
            },
            {
              "id": "compose",
              "description": "Encoding video",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "*/preview"
                  },
                  {
                    "key": "target-tags",
                    "$": "engage-download,engage-streaming,rss,atom"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "fast.http"
                  },
                  {
                    "key": "source-flavor",
                    "$": "*/source"
                  }
                ]
              }
            },
            {
              "id": "comment",
              "description": "Mark the recording for review / cutting",
              "fail-on-error": "true",
              "if": "${comment}",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "reason",
                    "$": "EVENTS.EVENTS.DETAILS.COMMENTS.REASONS.CUTTING"
                  },
                  {
                    "key": "action",
                    "$": "create"
                  },
                  {
                    "key": "description",
                    "$": "Recording has not been reviewed / cut yet."
                  }
                ]
              }
            },
            {
              "id": "image",
              "description": "Creating Engage search result thumbnails",
              "fail-on-error": "true",
              "if": "(NOT (${uploadedSearchPreview})) AND (${publishToMediaModule} OR ${publishToOaiPmh})",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "*/search+preview"
                  },
                  {
                    "key": "time",
                    "$": "1"
                  },
                  {
                    "key": "target-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "search-cover.http"
                  },
                  {
                    "key": "source-flavor",
                    "$": "*/preview"
                  }
                ]
              }
            },
            {
              "id": "image",
              "description": "Creating Engage player preview image",
              "fail-on-error": "true",
              "if": "${publishToMediaModule} OR ${publishToOaiPmh}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "*/player+preview"
                  },
                  {
                    "key": "time",
                    "$": "1"
                  },
                  {
                    "key": "target-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "player-preview.http"
                  },
                  {
                    "key": "source-flavor",
                    "$": "*/preview"
                  }
                ]
              }
            },
            {
              "id": "segment-video",
              "description": "Detecting slide transitions in presentation track",
              "fail-on-error": "false",
              "if": "${publishToMediaModule} OR ${publishToOaiPmh}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "source-flavor",
                    "$": "presentation/preview"
                  }
                ]
              }
            },
            {
              "id": "segmentpreviews",
              "description": "Creating presentation segments preview image",
              "fail-on-error": "false",
              "if": "${publishToMediaModule} OR ${publishToOaiPmh}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "reference-flavor",
                    "$": "presentation/preview"
                  },
                  {
                    "key": "reference-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "target-flavor",
                    "$": "presentation/segment+preview"
                  },
                  {
                    "key": "target-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "player-slides.http"
                  },
                  {
                    "key": "source-flavor",
                    "$": "presentation/preview"
                  }
                ]
              }
            },
            {
              "id": "timelinepreviews",
              "description": "Creating timeline preview images",
              "fail-on-error": "false",
              "if": "${publishToMediaModule} OR ${publishToOaiPmh}",
              "exception-handler-workflow": "error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "*/timeline+preview"
                  },
                  {
                    "key": "target-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "image-count",
                    "$": "100"
                  },
                  {
                    "key": "source-flavor",
                    "$": "*/preview"
                  }
                ]
              }
            },
            {
              "id": "extract-text",
              "description": "Extracting text from presentation segments",
              "fail-on-error": "false",
              "if": "${publishToMediaModule} OR ${publishToOaiPmh}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "source-flavor",
                    "$": "presentation/preview"
                  }
                ]
              }
            },
            {
              "id": "publish-configure",
              "description": "Publish to preview publication channel",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "check-availability",
                    "$": "true"
                  },
                  {
                    "key": "url-pattern",
                    "$": "http://localhost:8080/admin-ng/index.html#/events/events/${event_id}/tools/playback"
                  },
                  {
                    "key": "source-flavors",
                    "$": "*/preview"
                  },
                  {
                    "key": "channel-id",
                    "$": "internal"
                  }
                ]
              }
            },
            {
              "id": "publish-engage",
              "description": "Publishing to Engage",
              "fail-on-error": "true",
              "if": "${publishToMediaModule}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "2",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "check-availability",
                    "$": "true"
                  },
                  {
                    "key": "download-source-flavors",
                    "$": "dublincore/*,security/*"
                  },
                  {
                    "key": "download-source-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "streaming-source-tags",
                    "$": "engage-streaming"
                  }
                ]
              }
            },
            {
              "id": "publish-oaipmh",
              "description": "Publish to OAI-PMH Default Repository",
              "fail-on-error": "true",
              "if": "${publishToOaiPmh}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "check-availability",
                    "$": "true"
                  },
                  {
                    "key": "download-flavors",
                    "$": "dublincore/*,security/*"
                  },
                  {
                    "key": "download-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "streaming-tags",
                    "$": "engage-streaming"
                  },
                  {
                    "key": "repository",
                    "$": "default"
                  }
                ]
              }
            },
            {
              "id": "snapshot",
              "description": "Archiving",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-tags",
                  "$": "archive"
                }
              }
            },
            {
              "id": "cleanup",
              "description": "Cleaning up",
              "fail-on-error": "false",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "delete-external",
                    "$": "true"
                  },
                  {
                    "key": "preserve-flavors",
                    "$": "security/*"
                  }
                ]
              }
            }
          ]
        }
      },
      {
        "id": "import",
        "title": "Import Mediapackage and Publish without reencode",
        "tags": "",
        "description": "\n  A minimal Workflow that only publishes a Mediapackage\n  ",
        "displayOrder": 0,
        "published": false,
        "operations": {
          "operation": [
            {
              "id": "ingest-download",
              "description": "Ingesting external elements",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "delete-external",
                  "$": "true"
                }
              }
            },
            {
              "id": "series",
              "description": "Applying access control entries from series",
              "fail-on-error": "true",
              "exception-handler-workflow": "error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "apply-acl",
                  "$": "true"
                }
              }
            },
            {
              "id": "inspect",
              "description": "Inspecting audio and video streams",
              "fail-on-error": "true",
              "exception-handler-workflow": "error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "accept-no-media",
                    "$": "false"
                  },
                  {
                    "key": "overwrite",
                    "$": "false"
                  }
                ]
              }
            },
            {
              "id": "publish-configure",
              "description": "Publish to preview publication channel",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "check-availability",
                    "$": "true"
                  },
                  {
                    "key": "url-pattern",
                    "$": "http://localhost:8080/admin-ng/index.html#/events/events/${event_id}/tools/playback"
                  },
                  {
                    "key": "source-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "channel-id",
                    "$": "internal"
                  }
                ]
              }
            },
            {
              "id": "publish-engage",
              "description": "Publishing to Engage",
              "fail-on-error": "true",
              "exception-handler-workflow": "error",
              "max-attempts": "2",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "check-availability",
                    "$": "true"
                  },
                  {
                    "key": "download-source-flavors",
                    "$": "dublincore/*,security/*"
                  },
                  {
                    "key": "download-source-tags",
                    "$": "engage-download,atom,rss,mobile"
                  },
                  {
                    "key": "streaming-source-tags",
                    "$": "engage-streaming"
                  }
                ]
              }
            },
            {
              "id": "snapshot",
              "description": "Archiving",
              "fail-on-error": "true",
              "exception-handler-workflow": "error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-tags",
                  "$": "archive"
                }
              }
            },
            {
              "id": "cleanup",
              "description": "Cleaning up",
              "fail-on-error": "false",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "delete-external",
                  "$": "true"
                }
              }
            }
          ]
        }
      },
      {
        "id": "partial-ingest",
        "title": "Ingest asset",
        "tags": "",
        "description": "",
        "displayOrder": 0,
        "published": false,
        "configuration_panel": "",
        "operations": {
          "operation": [
            {
              "id": "ingest-download",
              "description": "Ingesting external elements",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "delete-external",
                  "$": "true"
                }
              }
            },
            {
              "id": "inspect",
              "description": "Inspecting audio and video streams",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "accept-no-media",
                    "$": "false"
                  },
                  {
                    "key": "overwrite",
                    "$": "false"
                  }
                ]
              }
            },
            {
              "id": "series",
              "description": "Applying access control entries",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "attach",
                    "$": "*"
                  },
                  {
                    "key": "apply-acl",
                    "$": "true"
                  }
                ]
              }
            },
            {
              "id": "tag",
              "description": "Tagging source material for archival",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavors",
                    "$": "*/*"
                  },
                  {
                    "key": "target-tags",
                    "$": "+archive"
                  }
                ]
              }
            },
            {
              "id": "tag",
              "description": "Tagging uploaded assets for distribution",
              "fail-on-error": "true",
              "if": "${downloadSourceflavorsExist}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavors",
                    "$": "${download-source-flavors}"
                  },
                  {
                    "key": "target-tags",
                    "$": "+engage-download"
                  }
                ]
              }
            },
            {
              "id": "tag",
              "description": "Tagging metadata catalogs for publication",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavors",
                    "$": "dublincore/*"
                  },
                  {
                    "key": "target-tags",
                    "$": "+engage-download"
                  }
                ]
              }
            },
            {
              "id": "tag",
              "description": "Tagging captions for publication",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavors",
                    "$": "*/captions"
                  },
                  {
                    "key": "target-tags",
                    "$": "+engage-download"
                  }
                ]
              }
            }
          ]
        }
      },
      {
        "id": "partial-preview",
        "title": "Prepare preview artifacts",
        "tags": "",
        "description": "",
        "displayOrder": 0,
        "published": false,
        "configuration_panel": "",
        "operations": {
          "operation": [
            {
              "id": "analyze-tracks",
              "description": "Analyze tracks in media package an set control variables",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-flavor",
                  "$": "*/work"
                }
              }
            },
            {
              "id": "compose",
              "description": "Create single-stream video preview",
              "fail-on-error": "true",
              "if": "NOT (${presenter_work_video} AND ${presentation_work_video})",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavors",
                    "$": "*/work"
                  },
                  {
                    "key": "target-flavor",
                    "$": "*/preview"
                  },
                  {
                    "key": "target-tags",
                    "$": "preview"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "mp4-preview.http"
                  }
                ]
              }
            },
            {
              "id": "composite",
              "description": "Create dual-stream video preview",
              "fail-on-error": "true",
              "if": "${presenter_work_video} AND ${presentation_work_video}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavor-lower",
                    "$": "presentation/work"
                  },
                  {
                    "key": "layout",
                    "$": "preview"
                  },
                  {
                    "key": "layout-preview",
                    "$": "{\"horizontalCoverage\":0.5,\"anchorOffset\":{\"referring\":{\"left\":1.0,\"top\":0.0},\"reference\":{\"left\":1.0,\"top\":0.0},\"offset\":{\"x\":0,\"y\":0}}};\n          {\"horizontalCoverage\":0.5,\"anchorOffset\":{\"referring\":{\"left\":0.0,\"top\":0.0},\"reference\":{\"left\":0.0,\"top\":0.0},\"offset\":{\"x\":0,\"y\":0}}};"
                  },
                  {
                    "key": "target-flavor",
                    "$": "composite/preview"
                  },
                  {
                    "key": "source-flavor-upper",
                    "$": "presenter/work"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "mp4-preview.dual.http"
                  },
                  {
                    "key": "target-tags",
                    "$": "preview"
                  },
                  {
                    "key": "output-background",
                    "$": "0x000000FF"
                  },
                  {
                    "key": "output-resolution",
                    "$": "1280x400"
                  }
                ]
              }
            },
            {
              "id": "waveform",
              "description": "Generating waveform",
              "fail-on-error": "false",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "*/waveform"
                  },
                  {
                    "key": "target-tags",
                    "$": "preview"
                  },
                  {
                    "key": "source-flavor",
                    "$": "*/preview"
                  }
                ]
              }
            },
            {
              "id": "silence",
              "description": "Detecting silence",
              "fail-on-error": "false",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "reference-tracks-flavor",
                    "$": "*/work"
                  },
                  {
                    "key": "source-flavors",
                    "$": "*/preview"
                  },
                  {
                    "key": "smil-flavor-subtype",
                    "$": "silence"
                  }
                ]
              }
            },
            {
              "id": "tag",
              "description": "Preparing silence detection for preview",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavors",
                    "$": "*/silence"
                  },
                  {
                    "key": "target-tags",
                    "$": "+archive"
                  }
                ]
              }
            },
            {
              "id": "publish-configure",
              "description": "Publish to preview publication channel",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "check-availability",
                    "$": "true"
                  },
                  {
                    "key": "url-pattern",
                    "$": "http://localhost:8080/admin-ng/index.html#/events/events/${event_id}/tools/playback"
                  },
                  {
                    "key": "source-tags",
                    "$": "preview"
                  },
                  {
                    "key": "channel-id",
                    "$": "internal"
                  }
                ]
              }
            }
          ]
        }
      },
      {
        "id": "partial-title-slide",
        "title": "Prepare title slide video",
        "tags": "",
        "description": "\n     Create a title slide video based on the trimmed tracks\n  ",
        "displayOrder": 0,
        "published": false,
        "configuration_panel": "",
        "operations": {
          "operation": [
            {
              "id": "analyze-tracks",
              "description": "Analyze trimmed tracks",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-flavor",
                  "$": "*/trimmed"
                }
              }
            },
            {
              "id": "image",
              "description": "Extracting title slide image from presentation track",
              "fail-on-error": "true",
              "if": "NOT ${theme_title_slide_uploaded} AND ${presentation_trimmed_has_video}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "branding/titleslide"
                  },
                  {
                    "key": "time",
                    "$": "1"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "player-preview.http"
                  },
                  {
                    "key": "source-flavor",
                    "$": "presentation/trimmed"
                  }
                ]
              }
            },
            {
              "id": "image",
              "description": "Extracting title slide image from presenter track",
              "fail-on-error": "true",
              "if": "NOT ${theme_title_slide_uploaded} AND NOT (${presentation_trimmed_has_video})",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "branding/titleslide"
                  },
                  {
                    "key": "time",
                    "$": "1"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "player-preview.http"
                  },
                  {
                    "key": "source-flavor",
                    "$": "presenter/trimmed"
                  }
                ]
              }
            },
            {
              "id": "cover-image",
              "description": "Create title slide with metadata",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "posterimage-flavor",
                    "$": "branding/titleslide"
                  },
                  {
                    "key": "stylesheet",
                    "$": "file://${karaf.etc}/branding/coverimage.xsl"
                  },
                  {
                    "key": "target-flavor",
                    "$": "branding/titleslide+metadata"
                  },
                  {
                    "key": "width",
                    "$": "1920"
                  },
                  {
                    "key": "height",
                    "$": "1080"
                  }
                ]
              }
            },
            {
              "id": "image-to-video",
              "description": "Create video with title slide",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "profile",
                    "$": "image-movie.work"
                  },
                  {
                    "key": "duration",
                    "$": "5"
                  },
                  {
                    "key": "target-flavor",
                    "$": "branding/titleslide+video"
                  },
                  {
                    "key": "source-flavor",
                    "$": "branding/titleslide+metadata"
                  }
                ]
              }
            }
          ]
        }
      },
      {
        "id": "partial-work",
        "title": "Prepare work versions",
        "tags": "",
        "description": "",
        "displayOrder": 0,
        "published": false,
        "configuration_panel": "",
        "operations": {
          "operation": [
            {
              "id": "prepare-av",
              "description": "Preparing presenter (camera) audio and video work versions",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "audio-muxing-source-flavors",
                    "$": "*/?,*/*"
                  },
                  {
                    "key": "target-flavor",
                    "$": "presenter/work"
                  },
                  {
                    "key": "rewrite",
                    "$": "false"
                  },
                  {
                    "key": "target-tags",
                    "$": "-archive"
                  },
                  {
                    "key": "source-flavor",
                    "$": "presenter/source"
                  }
                ]
              }
            },
            {
              "id": "prepare-av",
              "description": "Preparing presentation (screen) audio and video work version",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "audio-muxing-source-flavors",
                    "$": "*/?,*/*"
                  },
                  {
                    "key": "target-flavor",
                    "$": "presentation/work"
                  },
                  {
                    "key": "rewrite",
                    "$": "false"
                  },
                  {
                    "key": "target-tags",
                    "$": "-archive"
                  },
                  {
                    "key": "source-flavor",
                    "$": "presentation/source"
                  }
                ]
              }
            }
          ]
        }
      },
      {
        "id": "schedule-and-upload",
        "title": "Process upon upload and schedule",
        "tags": {
          "tag": [
            "schedule",
            "upload"
          ]
        },
        "description": "",
        "displayOrder": 3,
        "published": false,
        "configuration_panel": "\n    \n      <div id=\"workflow-configuration\">\n\n        <fieldset>\n          <legend>Video Qualities</legend>\n          <ul>\n            <li>\n              <input id=\"flagQuality360p\" name=\"flagQuality360p\" type=\"checkbox\" class=\"configField\" value=\"false\" />\n              <label for=\"flagQuality360p\">360p resolution</label>\n            </li>\n            <li>\n              <input id=\"flagQuality480p\" name=\"flagQuality480p\" type=\"checkbox\" class=\"configField\" value=\"false\" />\n              <label for=\"flagQuality480p\">480p resolution</label>\n            </li>\n            <li>\n              <input id=\"flagQuality720p\" name=\"flagQuality720p\" type=\"checkbox\" class=\"configField\" value=\"true\" checked=\"checked\"/>\n              <label for=\"flagQuality720p\">720p resolution (HDready)</label>\n            </li>\n            <li>\n              <input id=\"flagQuality1080p\" name=\"flagQuality1080p\" type=\"checkbox\" class=\"configField\" value=\"false\" />\n              <label for=\"flagQuality1080p\">1080p resolution (FullHD)</label>\n            </li>\n            <li>\n              <input id=\"flagQuality2160p\" name=\"flagQuality2160p\" type=\"checkbox\" class=\"configField\" value=\"false\" />\n              <label for=\"flagQuality2160p\">2160p resolution (UltraHD)</label>\n            </li>\n          </ul>\n        </fieldset>\n        <fieldset>\n          <legend>Add a comment that the recording needs:</legend>\n          <ul>\n            <li>\n              <input id=\"flagForCutting\" name=\"flagForCutting\" type=\"checkbox\" class=\"configField\" value=\"true\" />\n              <label for=\"flagForCutting\">Cutting</label>\n            </li>\n            <li>\n              <input id=\"flagForReview\" name=\"flagForReview\" type=\"checkbox\" class=\"configField\" value=\"true\" />\n              <label for=\"flagForReview\">Review</label>\n            </li>\n          </ul>\n        </fieldset>\n        <fieldset>\n          <legend>After upload and ingest:</legend>\n          <ul>\n            <li>\n              <input id=\"holdOrPublishToggle_hold\" type=\"radio\" name=\"holdOrPublishToggle\" value=\"hold\" />\n              <label for=\"holdOrPublishToggle_hold\">Hold</label>\n            </li>\n            <li>\n              <input id=\"holdOrPublishToggle_publish\" type=\"radio\" name=\"holdOrPublishToggle\" value=\"publish\" checked=\"checked\" />\n              <label for=\"holdOrPublishToggle_publish\">Publish right away to</label>\n              <ul id=\"publicationConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n                <li>\n                  <input id=\"publishToSearch\" name=\"publishToSearch\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n                  <label for=\"publishToSearch\">Opencast Index</label>\n                  <fieldset>\n                    <ul id=\"searchConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n                      <li>\n                        <input id=\"publishToEngage\" name=\"searchPublishType\" type=\"radio\" checked=\"checked\" class=\"configField\" value=\"true\" />\n                        <label for=\"publishToEngage\">Opencast Media Module</label>\n                      </li>\n                      <li>\n                        <input id=\"publishToAws\" name=\"searchPublishType\" type=\"radio\" class=\"configField\" value=\"true\"/>\n                        <label for=\"publishToAws\">AWS</label>\n                      </li>\n                    </ul>\n                  </fieldset>\n                </li>\n                <li>\n                  <input id=\"publishToApi\" name=\"publishToApi\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n                  <label for=\"publishToApi\">External Applications</label>\n                </li>\n                <li>\n                  <input id=\"publishToOaiPmh\" name=\"publishToOaiPmh\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n                  <label for=\"publishToOaiPmh\">OAI-PMH Default Repository</label>\n                </li>\n                <li>\n                  <input id=\"publishToYouTube\" name=\"publishToYouTube\" type=\"checkbox\" class=\"configField\" value=\"true\" disabled=\"disabled\" />\n                  <label for=\"publishToYouTube\">YouTube</label>\n                </li>\n              </ul>\n            </li>\n          </ul>\n          <!-- Place to keep the hold vs. publication state -->\n          <input type=\"hidden\" id=\"straightToPublishing\" class=\"configField\" value=\"true\" />\n        </fieldset>\n        <fieldset>\n          <legend>Publish live stream:</legend>\n            <ul>\n              <li>\n                <input id=\"publishLive\" name=\"publishLive\" type=\"checkbox\" class=\"configField\" value=\"false\" />\n                <label for=publishLive>Add live event to Opencast Media Module</label>\n              </li>\n            </ul>\n          </fieldset>\n      </div>\n\n      <!-- Show or hide the hold and publication configuration panel -->\n      <script type=\"text/javascript\">\n        $('input[name=\"holdOrPublishToggle\"]').change(function(){\n            var show = $(this).val() == 'publish';\n            $('#publicationConfigurationPanel').toggle(show);\n            $('#straightToPublishing').val(show);\n        });\n\n        <!-- Remove the line below if you wish to publish to AWS S3 -->\n        $('#publishToAws').prop('disabled', true);\n        <!-- Remove the line above if you wish to publish to AWS S3 -->\n\n        awsWasDisabled = $('#publishToAws').prop('disabled');\n        awsWasChecked = $('#publishToAws').prop('checked');\n        engageWasChecked = $('#publishToEngage').prop('checked');\n\n        $('input[name=\"publishToSearch\"]').change(function(){\n            if ($(this).is(':checked')) {\n              $('#publishToAws').prop('checked', awsWasChecked);\n              $('#publishToEngage').prop('checked', engageWasChecked);\n              $('#publishToAws').prop('disabled', awsWasDisabled);\n              $('#publishToEngage').prop('disabled', false);\n            } else if (!$(this).is(':checked')) {\n              awsWasChecked = $('#publishToAws').prop('checked');\n              engageWasChecked = $('#publishToEngage').prop('checked');\n\n              $('#publishToAws').prop('disabled', true);\n              $('#publishToEngage').prop('disabled', true);\n              $('#publishToAws').prop('checked', false);\n              $('#publishToEngage').prop('checked', false);\n            }\n        });\n      </script>\n    \n  ",
        "operations": {
          "operation": [
            {
              "id": "defaults",
              "description": "Applying default configuration values",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "publishToYouTube",
                    "$": "false"
                  },
                  {
                    "key": "publishToApi",
                    "$": "true"
                  },
                  {
                    "key": "straightToPublishing",
                    "$": "true"
                  },
                  {
                    "key": "publishLive",
                    "$": "false"
                  },
                  {
                    "key": "publishToOaiPmh",
                    "$": "true"
                  },
                  {
                    "key": "flagQuality1080p",
                    "$": "false"
                  },
                  {
                    "key": "publishToEngage",
                    "$": "true"
                  },
                  {
                    "key": "flagQuality360p",
                    "$": "false"
                  },
                  {
                    "key": "flagQuality480p",
                    "$": "false"
                  },
                  {
                    "key": "flagForCutting",
                    "$": "false"
                  },
                  {
                    "key": "flagQuality720p",
                    "$": "true"
                  },
                  {
                    "key": "flagForReview",
                    "$": "false"
                  },
                  {
                    "key": "uploadedSearchPreview",
                    "$": "false"
                  },
                  {
                    "key": "flagQuality2160p",
                    "$": "false"
                  },
                  {
                    "key": "publishToAws",
                    "$": "false"
                  }
                ]
              }
            },
            {
              "id": "export-wf-properties",
              "description": "Export workflow settings to Java properties file",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "target-flavor",
                  "$": "processing/defaults"
                }
              }
            },
            {
              "id": "include",
              "description": "Finalize upload and ingest",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-ingest"
                }
              }
            },
            {
              "id": "snapshot",
              "description": "Archive raw recording after ingest",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-tags",
                  "$": "archive"
                }
              }
            },
            {
              "id": "include",
              "description": "Prepare the recording for further processing",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-work"
                }
              }
            },
            {
              "id": "include",
              "description": "Prepare preview versions of the recording",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-preview"
                }
              }
            },
            {
              "id": "snapshot",
              "description": "Archive preview information",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-tags",
                  "$": "archive"
                }
              }
            },
            {
              "id": "comment",
              "description": "Mark the recording for cutting",
              "fail-on-error": "true",
              "if": "${flagForCutting}",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "reason",
                    "$": "EVENTS.EVENTS.DETAILS.COMMENTS.REASONS.CUTTING"
                  },
                  {
                    "key": "action",
                    "$": "create"
                  },
                  {
                    "key": "description",
                    "$": "Recording has not been cut yet."
                  }
                ]
              }
            },
            {
              "id": "comment",
              "description": "Mark the recording for review",
              "fail-on-error": "true",
              "if": "${flagForReview}",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "reason",
                    "$": "EVENTS.EVENTS.DETAILS.COMMENTS.REASONS.REVIEW"
                  },
                  {
                    "key": "action",
                    "$": "create"
                  },
                  {
                    "key": "description",
                    "$": "Recording has not been reviewed yet."
                  }
                ]
              }
            },
            {
              "id": "include",
              "description": "Publish the recording",
              "fail-on-error": "true",
              "if": "${straightToPublishing}",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-publish"
                }
              }
            },
            {
              "id": "snapshot",
              "description": "Archive publishing information",
              "fail-on-error": "true",
              "if": "${straightToPublishing}",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-tags",
                  "$": "archive"
                }
              }
            },
            {
              "id": "include",
              "description": "Remove temporary processing artifacts",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-cleanup"
                }
              }
            }
          ]
        }
      },
      {
        "id": "publish",
        "title": "Publish",
        "tags": {
          "tag": "archive"
        },
        "description": "",
        "displayOrder": 1000,
        "published": false,
        "configuration_panel": "\n    \n      <div id=\"workflow-configuration\">\n        <fieldset>\n          <legend>Video Quality</legend>\n          <ul>\n            <li>\n              <input id=\"flagMultiQuality\" name=\"flagMultiQuality\" type=\"checkbox\" class=\"configField\" value=\"false\" />\n              <label for=\"flagMultiQuality\">Multi Quality Videos for Adaptive Streaming</label>\n            </li>\n          </ul>\n        </fieldset>\n        <fieldset>\n          <legend>Publish to:</legend>\n          <ul id=\"publicationConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n            <li>\n              <input id=\"publishToSearch\" name=\"publishToSearch\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n              <label for=\"publishToSearch\">Opencast Index</label>\n              <ul id=\"searchConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n                <li>\n                  <input id=\"publishToEngage\" name=\"searchPublishType\" type=\"radio\" checked=\"checked\" class=\"configField\" value=\"true\" />\n                  <label for=\"publishToEngage\">Opencast Media Module</label>\n                </li>\n                <li>\n                  <input id=\"publishToAws\" name=\"searchPublishType\" type=\"radio\" class=\"configField\" value=\"true\" disabled=\"disabled\"/>\n                  <label for=\"publishToAws\">AWS</label>\n                 </li>\n              </ul>\n            </li>\n            <li>\n              <input id=\"publishToApi\" name=\"publishToApi\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n              <label for=\"publishToApi\">External Applications</label>\n            </li>\n            <li>\n              <input id=\"publishToOaiPmh\" name=\"publishToOaiPmh\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n              <label for=\"publishToOaiPmh\">OAI-PMH Default Repository</label>\n            </li>\n            <li>\n              <input id=\"publishToYouTube\" name=\"publishToYouTube\" type=\"checkbox\" class=\"configField\" value=\"true\" disabled=\"disabled\" />\n              <label for=\"publishToYouTube\">YouTube</label>\n            </li>\n          </ul>\n        </fieldset>\n      </div>\n\n      <!-- Show or hide the hold and publication configuration panel -->\n      <script type=\"text/javascript\">\n        awsWasDisabled = $('#publishToAws').prop('disabled');\n        awsWasChecked = $('#publishToAws').prop('checked');\n        engageWasChecked = $('#publishToEngage').prop('checked');\n\n        $('input[name=\"publishToSearch\"]').change(function(){\n            if ($(this).is(':checked')) {\n              $('#publishToAws').prop('checked', awsWasChecked);\n              $('#publishToEngage').prop('checked', engageWasChecked);\n              $('#publishToAws').prop('disabled', awsWasDisabled);\n              $('#publishToEngage').prop('disabled', false);\n            } else {\n              awsWasChecked = $('#publishToAws').prop('checked');\n              engageWasChecked = $('#publishToEngage').prop('checked');\n              $('#searchConfigurationPanel input').prop('disabled', true)\n                                                  .prop('checked', false);\n            }\n        });\n      </script>\n    \n  ",
        "operations": {
          "operation": [
            {
              "id": "defaults",
              "description": "Applying default configuration values",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "publishToYouTube",
                    "$": "false"
                  },
                  {
                    "key": "publishToApi",
                    "$": "true"
                  },
                  {
                    "key": "publishToOaiPmh",
                    "$": "true"
                  },
                  {
                    "key": "flagMultiQuality",
                    "$": "false"
                  },
                  {
                    "key": "publishToEngage",
                    "$": "true"
                  },
                  {
                    "key": "publishToAws",
                    "$": "false"
                  }
                ]
              }
            },
            {
              "id": "include",
              "description": "Prepare the recording for further processing",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-work"
                }
              }
            },
            {
              "id": "include",
              "description": "Publish the recording",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-publish"
                }
              }
            },
            {
              "id": "snapshot",
              "description": "Archive publishing information",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-tags",
                  "$": "archive"
                }
              }
            },
            {
              "id": "include",
              "description": "Remove temporary processing artifacts",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-cleanup"
                }
              }
            }
          ]
        }
      },
      {
        "id": "publish-after-cutting",
        "title": "Publish",
        "tags": {
          "tag": "editor"
        },
        "description": "",
        "displayOrder": 0,
        "published": false,
        "configuration_panel": "",
        "operations": {
          "operation": [
            {
              "id": "defaults",
              "description": "Applying default configuration values",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "publishToYouTube",
                    "$": "false"
                  },
                  {
                    "key": "publishToApi",
                    "$": "true"
                  },
                  {
                    "key": "publishToEngage",
                    "$": "true"
                  }
                ]
              }
            },
            {
              "id": "import-wf-properties",
              "description": "Load processing settings",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-flavor",
                  "$": "processing/defaults"
                }
              }
            },
            {
              "id": "comment",
              "description": "Resolve the cutting flag",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "reason",
                    "$": "EVENTS.EVENTS.DETAILS.COMMENTS.REASONS.CUTTING"
                  },
                  {
                    "key": "action",
                    "$": "resolve"
                  },
                  {
                    "key": "description",
                    "$": "Recording has not been cut yet."
                  }
                ]
              }
            },
            {
              "id": "include",
              "description": "Prepare the recording for further processing",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-work"
                }
              }
            },
            {
              "id": "include",
              "description": "Publish the recording",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-publish"
                }
              }
            },
            {
              "id": "snapshot",
              "description": "Archive publishing information",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-tags",
                  "$": "archive"
                }
              }
            },
            {
              "id": "include",
              "description": "Remove temporary processing artifacts",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-cleanup"
                }
              }
            }
          ]
        }
      },
      {
        "id": "partial-publish",
        "title": "Publish the recording",
        "tags": "",
        "description": "",
        "displayOrder": 0,
        "published": false,
        "configuration_panel": "",
        "operations": {
          "operation": [
            {
              "id": "editor",
              "description": "Cut the recording according to the edit decision list",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor-subtype",
                    "$": "trimmed"
                  },
                  {
                    "key": "smil-flavors",
                    "$": "smil/cutting"
                  },
                  {
                    "key": "target-smil-flavor",
                    "$": "smil/cutting"
                  },
                  {
                    "key": "source-flavors",
                    "$": "*/work"
                  },
                  {
                    "key": "interactive",
                    "$": "false"
                  }
                ]
              }
            },
            {
              "id": "tag",
              "description": "Tagging cutting information for archival",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavors",
                    "$": "smil/cutting"
                  },
                  {
                    "key": "target-tags",
                    "$": "archive"
                  }
                ]
              }
            },
            {
              "id": "snapshot",
              "description": "Archive cutting information",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-tags",
                  "$": "archive"
                }
              }
            },
            {
              "id": "tag",
              "description": "Tagging uploaded assets for distribution",
              "fail-on-error": "true",
              "if": "${downloadSourceflavorsExist}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavors",
                    "$": "${download-source-flavors}"
                  },
                  {
                    "key": "target-tags",
                    "$": "+engage-download"
                  }
                ]
              }
            },
            {
              "id": "image",
              "description": "Creating search result thumbnails",
              "fail-on-error": "true",
              "if": "NOT (${uploadedSearchPreview})",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "*/search+preview"
                  },
                  {
                    "key": "source-tags"
                  },
                  {
                    "key": "time",
                    "$": "1"
                  },
                  {
                    "key": "target-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "search-cover.http"
                  },
                  {
                    "key": "source-flavor",
                    "$": "*/trimmed"
                  }
                ]
              }
            },
            {
              "id": "image",
              "description": "Creating player preview image",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "*/player+preview"
                  },
                  {
                    "key": "source-tags"
                  },
                  {
                    "key": "time",
                    "$": "1"
                  },
                  {
                    "key": "target-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "player-preview.http"
                  },
                  {
                    "key": "source-flavor",
                    "$": "*/trimmed"
                  }
                ]
              }
            },
            {
              "id": "image",
              "description": "Creating feed cover image",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "*/feed+preview"
                  },
                  {
                    "key": "source-tags"
                  },
                  {
                    "key": "time",
                    "$": "1"
                  },
                  {
                    "key": "target-tags",
                    "$": "atom,rss"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "feed-cover.http"
                  },
                  {
                    "key": "source-flavor",
                    "$": "*/trimmed"
                  }
                ]
              }
            },
            {
              "id": "tag",
              "description": "Removing unneeded presenter-cover from download publication",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavors",
                    "$": "presenter/player+preview"
                  },
                  {
                    "key": "target-tags",
                    "$": "-engage-download"
                  }
                ]
              }
            },
            {
              "id": "image",
              "description": "Creating player preview image",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "presenter/coverbackground"
                  },
                  {
                    "key": "source-tags"
                  },
                  {
                    "key": "time",
                    "$": "1"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "player-preview.http"
                  },
                  {
                    "key": "source-flavor",
                    "$": "presenter/trimmed"
                  }
                ]
              }
            },
            {
              "id": "cover-image",
              "description": "Create a cover image",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "posterimage-flavor",
                    "$": "presenter/coverbackground"
                  },
                  {
                    "key": "stylesheet",
                    "$": "file://${karaf.etc}/branding/coverimage.xsl"
                  },
                  {
                    "key": "target-flavor",
                    "$": "presenter/player+preview"
                  },
                  {
                    "key": "width",
                    "$": "1920"
                  },
                  {
                    "key": "target-tags",
                    "$": "archive, engage-download"
                  },
                  {
                    "key": "height",
                    "$": "1080"
                  }
                ]
              }
            },
            {
              "id": "timelinepreviews",
              "description": "Creating timeline preview images",
              "fail-on-error": "false",
              "exception-handler-workflow": "error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "*/timeline+preview"
                  },
                  {
                    "key": "target-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "image-count",
                    "$": "100"
                  },
                  {
                    "key": "source-flavor",
                    "$": "*/trimmed"
                  }
                ]
              }
            },
            {
              "id": "theme",
              "description": "Apply the theme",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "bumper-tags",
                    "$": "archive"
                  },
                  {
                    "key": "bumper-flavor",
                    "$": "branding/bumper"
                  },
                  {
                    "key": "title-slide-flavor",
                    "$": "branding/titleslide"
                  },
                  {
                    "key": "watermark-flavor",
                    "$": "branding/watermark"
                  },
                  {
                    "key": "trailer-flavor",
                    "$": "branding/trailer"
                  },
                  {
                    "key": "trailer-tags",
                    "$": "archive"
                  },
                  {
                    "key": "watermark-layout-variable",
                    "$": "theme_watermark_layout_variable"
                  },
                  {
                    "key": "title-slide-tags",
                    "$": "archive"
                  },
                  {
                    "key": "watermark-layout",
                    "$": "theme_watermark_layout"
                  },
                  {
                    "key": "watermark-tags",
                    "$": "archive"
                  }
                ]
              }
            },
            {
              "id": "inspect",
              "description": "Inspecting audio and video streams",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "accept-no-media",
                    "$": "false"
                  },
                  {
                    "key": "overwrite",
                    "$": "false"
                  }
                ]
              }
            },
            {
              "id": "include",
              "description": "Prepare title slide video",
              "fail-on-error": "true",
              "if": "${theme_title_slide_active}",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-title-slide"
                }
              }
            },
            {
              "id": "include",
              "description": "Render watermarks into video tracks",
              "fail-on-error": "true",
              "if": "${theme_watermark_active}",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-watermark"
                }
              }
            },
            {
              "id": "tag",
              "description": "Tagging presenter track as input for next operation",
              "fail-on-error": "true",
              "if": "NOT (${theme_watermark_active})",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavors",
                    "$": "presenter/trimmed"
                  },
                  {
                    "key": "target-flavor",
                    "$": "presenter/branded"
                  }
                ]
              }
            },
            {
              "id": "tag",
              "description": "Tagging presentation track as input for next operation",
              "fail-on-error": "true",
              "if": "NOT (${theme_watermark_active})",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavors",
                    "$": "presentation/trimmed"
                  },
                  {
                    "key": "target-flavor",
                    "$": "presentation/branded"
                  }
                ]
              }
            },
            {
              "id": "concat",
              "description": "Concatenate presenter track with intro, title slide and outro videos",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavor-part-3-mandatory",
                    "$": "${theme_trailer_active}"
                  },
                  {
                    "key": "source-flavor-part-1-mandatory",
                    "$": "${theme_title_slide_active}"
                  },
                  {
                    "key": "target-flavor",
                    "$": "presenter/themed"
                  },
                  {
                    "key": "source-flavor-part-1",
                    "$": "branding/titleslide+video"
                  },
                  {
                    "key": "source-flavor-part-0",
                    "$": "branding/bumper"
                  },
                  {
                    "key": "source-flavor-part-0-mandatory",
                    "$": "${theme_bumper_active}"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "concat.work"
                  },
                  {
                    "key": "source-flavor-part-3",
                    "$": "branding/trailer"
                  },
                  {
                    "key": "output-resolution",
                    "$": "part-2"
                  },
                  {
                    "key": "source-flavor-part-2",
                    "$": "presenter/branded"
                  },
                  {
                    "key": "source-flavor-part-2-mandatory",
                    "$": "true"
                  },
                  {
                    "key": "output-framerate",
                    "$": "part-2"
                  }
                ]
              }
            },
            {
              "id": "concat",
              "description": "Concatenate presentation track with intro, title slide and outro videos",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavor-part-3-mandatory",
                    "$": "${theme_trailer_active}"
                  },
                  {
                    "key": "source-flavor-part-1-mandatory",
                    "$": "${theme_title_slide_active}"
                  },
                  {
                    "key": "target-flavor",
                    "$": "presentation/themed"
                  },
                  {
                    "key": "source-flavor-part-1",
                    "$": "branding/titleslide+video"
                  },
                  {
                    "key": "source-flavor-part-0",
                    "$": "branding/bumper"
                  },
                  {
                    "key": "source-flavor-part-0-mandatory",
                    "$": "${theme_bumper_active}"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "concat.work"
                  },
                  {
                    "key": "source-flavor-part-3",
                    "$": "branding/trailer"
                  },
                  {
                    "key": "output-resolution",
                    "$": "part-2"
                  },
                  {
                    "key": "source-flavor-part-2",
                    "$": "presentation/branded"
                  },
                  {
                    "key": "source-flavor-part-2-mandatory",
                    "$": "true"
                  },
                  {
                    "key": "output-framerate",
                    "$": "part-2"
                  }
                ]
              }
            },
            {
              "id": "compose",
              "description": "Encoding 360p video to MP4 download",
              "fail-on-error": "true",
              "if": "${flagQuality360p}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "*/delivery"
                  },
                  {
                    "key": "target-tags",
                    "$": "engage-download,engage-streaming,360p-quality"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "adaptive-360p.http"
                  },
                  {
                    "key": "source-flavor",
                    "$": "*/themed"
                  }
                ]
              }
            },
            {
              "id": "compose",
              "description": "Encoding 480p video to MP4 download",
              "fail-on-error": "true",
              "if": "${flagQuality480p}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "*/delivery"
                  },
                  {
                    "key": "target-tags",
                    "$": "engage-download,engage-streaming,480p-quality"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "adaptive-480p.http"
                  },
                  {
                    "key": "source-flavor",
                    "$": "*/themed"
                  }
                ]
              }
            },
            {
              "id": "compose",
              "description": "Encoding 720p video to MP4 download",
              "fail-on-error": "true",
              "if": "${flagQuality720p}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "*/delivery"
                  },
                  {
                    "key": "target-tags",
                    "$": "engage-download,engage-streaming,720p-quality"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "adaptive-720p.http"
                  },
                  {
                    "key": "source-flavor",
                    "$": "*/themed"
                  }
                ]
              }
            },
            {
              "id": "compose",
              "description": "Encoding 1080p video to MP4 download",
              "fail-on-error": "true",
              "if": "${flagQuality1080p}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "*/delivery"
                  },
                  {
                    "key": "target-tags",
                    "$": "engage-download,engage-streaming,1080p-quality"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "adaptive-1080p.http"
                  },
                  {
                    "key": "source-flavor",
                    "$": "*/themed"
                  }
                ]
              }
            },
            {
              "id": "compose",
              "description": "Encoding 2160p video to MP4 download",
              "fail-on-error": "true",
              "if": "${flagQuality2160p}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-flavor",
                    "$": "*/delivery"
                  },
                  {
                    "key": "target-tags",
                    "$": "engage-download,engage-streaming,2160p-quality"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "adaptive-2160p.http"
                  },
                  {
                    "key": "source-flavor",
                    "$": "*/themed"
                  }
                ]
              }
            },
            {
              "id": "segment-video",
              "description": "Detecting slide transitions in presentation track",
              "fail-on-error": "false",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "source-flavor",
                    "$": "presentation/themed"
                  }
                ]
              }
            },
            {
              "id": "segmentpreviews",
              "description": "Creating preview images for presentation segments",
              "fail-on-error": "false",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "reference-flavor",
                    "$": "presentation/delivery"
                  },
                  {
                    "key": "reference-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "target-flavor",
                    "$": "presentation/segment+preview"
                  },
                  {
                    "key": "target-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "player-slides.http"
                  },
                  {
                    "key": "source-flavor",
                    "$": "presentation/themed"
                  }
                ]
              }
            },
            {
              "id": "extract-text",
              "description": "Extracting text from presentation segments",
              "fail-on-error": "false",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "target-tags",
                    "$": "engage-download"
                  },
                  {
                    "key": "source-flavor",
                    "$": "presentation/themed"
                  }
                ]
              }
            },
            {
              "id": "publish-engage",
              "description": "Publishing to Opencast Media Module",
              "fail-on-error": "true",
              "if": "${publishToEngage}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "2",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "check-availability",
                    "$": "true"
                  },
                  {
                    "key": "download-source-flavors",
                    "$": "dublincore/*,security/*"
                  },
                  {
                    "key": "download-source-tags",
                    "$": "engage-download,atom,rss,mobile"
                  },
                  {
                    "key": "streaming-source-tags",
                    "$": "engage-streaming"
                  }
                ]
              }
            },
            {
              "id": "publish-aws",
              "description": "Publishing to Amazon Web Services",
              "fail-on-error": "true",
              "if": "${publishToAws}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "2",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "check-availability",
                    "$": "true"
                  },
                  {
                    "key": "download-source-flavors",
                    "$": "dublincore/*,security/*"
                  },
                  {
                    "key": "download-source-tags",
                    "$": "engage-download,atom,rss,mobile"
                  },
                  {
                    "key": "streaming-source-tags",
                    "$": "engage-streaming"
                  },
                  {
                    "key": "strategy",
                    "$": "merge"
                  }
                ]
              }
            },
            {
              "id": "publish-configure",
              "description": "Publish to external api publication channel",
              "fail-on-error": "true",
              "if": "${publishToApi}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "check-availability",
                    "$": "true"
                  },
                  {
                    "key": "with-published-elements",
                    "$": "false"
                  },
                  {
                    "key": "url-pattern",
                    "$": "http://localhost:8080/api/events/${event_id}"
                  },
                  {
                    "key": "mimetype",
                    "$": "application/json"
                  },
                  {
                    "key": "source-tags",
                    "$": "engage-download,engage-streaming"
                  },
                  {
                    "key": "channel-id",
                    "$": "api"
                  }
                ]
              }
            },
            {
              "id": "publish-oaipmh",
              "description": "Publish to OAI-PMH Default Repository",
              "fail-on-error": "true",
              "if": "${publishToOaiPmh}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "check-availability",
                    "$": "true"
                  },
                  {
                    "key": "download-flavors",
                    "$": "dublincore/*,security/*"
                  },
                  {
                    "key": "download-tags",
                    "$": "engage-download,atom,rss"
                  },
                  {
                    "key": "streaming-tags",
                    "$": "engage-streaming"
                  },
                  {
                    "key": "repository",
                    "$": "default"
                  }
                ]
              }
            },
            {
              "id": "publish-youtube",
              "description": "Publishing to YouTube",
              "fail-on-error": "true",
              "if": "${publishToYouTube}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "2",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-tags",
                  "$": "engage-download"
                }
              }
            }
          ]
        }
      },
      {
        "id": "publish-uploaded-assets",
        "title": "Publish uploaded assets",
        "tags": "",
        "description": "Publish uploaded assets",
        "displayOrder": 0,
        "published": false,
        "configuration_panel": "\n  ",
        "operations": {
          "operation": [
            {
              "id": "defaults",
              "description": "Applying default configuration values",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "publishToYouTube",
                    "$": "false"
                  },
                  {
                    "key": "publishToOaiPmh",
                    "$": "true"
                  },
                  {
                    "key": "publishToEngage",
                    "$": "true"
                  }
                ]
              }
            },
            {
              "id": "tag",
              "description": "Tagging media package elements for archival",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavors",
                    "$": "*/*"
                  },
                  {
                    "key": "target-tags",
                    "$": "+archive"
                  }
                ]
              }
            },
            {
              "id": "publish-engage",
              "description": "Update recording in Opencast Media Module",
              "fail-on-error": "true",
              "if": "${publishToEngage}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "check-availability",
                    "$": "false"
                  },
                  {
                    "key": "download-source-flavors",
                    "$": "${download-source-flavors}"
                  },
                  {
                    "key": "strategy",
                    "$": "merge"
                  }
                ]
              }
            },
            {
              "id": "republish-oaipmh",
              "description": "Update recording metadata in default OAI-PMH repository",
              "fail-on-error": "true",
              "if": "${publishToOaiPmh}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavors",
                    "$": "${download-source-flavors}"
                  },
                  {
                    "key": "repository",
                    "$": "default"
                  }
                ]
              }
            },
            {
              "id": "snapshot",
              "description": "Archiving new assets",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-tags",
                  "$": "archive"
                }
              }
            },
            {
              "id": "include",
              "description": "Remove temporary processing artifacts",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-cleanup"
                }
              }
            }
          ]
        }
      },
      {
        "id": "partial-watermark",
        "title": "Render watermark",
        "tags": "",
        "description": "\n     Render watermark into presenter and presentation tracks\n  ",
        "displayOrder": 0,
        "published": false,
        "configuration_panel": "",
        "operations": {
          "operation": [
            {
              "id": "analyze-tracks",
              "description": "Analyze trimmed tracks",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-flavor",
                  "$": "*/trimmed"
                }
              }
            },
            {
              "id": "composite",
              "description": "Render watermark into presenter track",
              "fail-on-error": "true",
              "if": "${presenter_trimmed_video}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavor-watermark",
                    "$": "branding/watermark"
                  },
                  {
                    "key": "source-flavor-lower",
                    "$": "presenter/trimmed"
                  },
                  {
                    "key": "target-flavor",
                    "$": "presenter/branded"
                  },
                  {
                    "key": "source-flavor-upper",
                    "$": "not/available"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "composite.http"
                  },
                  {
                    "key": "output-background",
                    "$": "0x000000FF"
                  },
                  {
                    "key": "output-resolution",
                    "$": "lower"
                  },
                  {
                    "key": "layout-single",
                    "$": "{\"horizontalCoverage\":1.0,\"anchorOffset\":{\"referring\":{\"left\":1.0,\"top\":0.0},\"reference\":{\"left\":1.0,\"top\":0.0},\"offset\":{\"x\":0,\"y\":0}}};\n            ${theme_watermark_layout_variable}"
                  }
                ]
              }
            },
            {
              "id": "composite",
              "description": "Render watermark into presentation track",
              "fail-on-error": "true",
              "if": "${presentation_trimmed_video}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavor-watermark",
                    "$": "branding/watermark"
                  },
                  {
                    "key": "source-flavor-lower",
                    "$": "presentation/trimmed"
                  },
                  {
                    "key": "target-flavor",
                    "$": "presentation/branded"
                  },
                  {
                    "key": "source-flavor-upper",
                    "$": "not/available"
                  },
                  {
                    "key": "encoding-profile",
                    "$": "composite.http"
                  },
                  {
                    "key": "output-background",
                    "$": "0x000000FF"
                  },
                  {
                    "key": "output-resolution",
                    "$": "lower"
                  },
                  {
                    "key": "layout-single",
                    "$": "{\"horizontalCoverage\":1.0,\"anchorOffset\":{\"referring\":{\"left\":1.0,\"top\":0.0},\"reference\":{\"left\":1.0,\"top\":0.0},\"offset\":{\"x\":0,\"y\":0}}};\n            ${theme_watermark_layout_variable}"
                  }
                ]
              }
            }
          ]
        }
      },
      {
        "id": "republish-metadata",
        "title": "Republish metadata",
        "tags": {
          "tag": "archive"
        },
        "description": "",
        "displayOrder": 900,
        "published": false,
        "configuration_panel": "\n    \n      <div id=\"workflow-configuration\">\n        <fieldset>\n          <legend>Update metadata at:</legend>\n          <ul>\n            <li>\n              <input id=\"publishToEngage\" name=\"publishToEngage\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n              <label for=\"publishToEngage\">Opencast Media Module</label>\n            </li>\n            <li>\n              <input id=\"publishToOaiPmh\" name=\"publishToOaiPmh\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n              <label for=\"publishToOaiPmh\">Default OAI-PMH Repository</label>\n            </li>\n            <!-- Fixme: uncomment as soon as the publish-youtube workflow operation handler supports merging\n            <li>\n              <input id=\"publishToYouTube\" name=\"publishToYouTube\" type=\"checkbox\" class=\"configField\" value=\"true\" />\n              <label for=\"publishToYouTube\">YouTube</label>\n            </li>\n            -->\n          </ul>\n        </fieldset>\n      </div>\n    \n  ",
        "operations": {
          "operation": [
            {
              "id": "defaults",
              "description": "Applying default configuration values",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "publishToYouTube",
                    "$": "false"
                  },
                  {
                    "key": "publishToOaiPmh",
                    "$": "true"
                  },
                  {
                    "key": "publishToEngage",
                    "$": "true"
                  }
                ]
              }
            },
            {
              "id": "publish-engage",
              "description": "Update recording in Opencast Media Module",
              "fail-on-error": "true",
              "if": "${publishToEngage}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "check-availability",
                    "$": "false"
                  },
                  {
                    "key": "download-source-flavors",
                    "$": "dublincore/*,security/*"
                  },
                  {
                    "key": "strategy",
                    "$": "merge"
                  }
                ]
              }
            },
            {
              "id": "republish-oaipmh",
              "description": "Update recording metadata in default OAI-PMH repository",
              "fail-on-error": "true",
              "if": "${publishToOaiPmh}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "source-flavors",
                    "$": "dublincore/*,security/*"
                  },
                  {
                    "key": "repository",
                    "$": "default"
                  }
                ]
              }
            },
            {
              "id": "include",
              "description": "Remove temporary processing artifacts",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-cleanup"
                }
              }
            }
          ]
        }
      },
      {
        "id": "retract",
        "title": "Retract",
        "tags": {
          "tag": [
            "archive",
            "delete"
          ]
        },
        "description": "Retract a recording",
        "displayOrder": 100,
        "published": false,
        "configuration_panel": "\n    \n      <div id=\"workflow-configuration\">\n        <fieldset>\n          <legend>Retract the recording from:</legend>\n          <ul>\n            <li>\n              <input id=\"retractFromEngage\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n              <label for=\"retractFromEngage\">Opencast Media Module</label>\n            </li>\n            <li>\n              <input id=\"retractFromAws\" type=\"checkbox\" class=\"configField\" value=\"true\" disabled=\"disabled\" />\n              <label for=\"retractFromAws\">AWS</label>\n            </li>\n            <li>\n              <input id=\"retractFromApi\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n              <label for=\"retractFromApi\">External Applications</label>\n            </li>\n            <li>\n              <input id=\"retractPreview\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n              <label for=\"retractPreview\">Preview and Editing Media</label>\n            </li>\n            <li>\n              <input id=\"retractFromOaiPmh\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n              <label for=\"retractFromOaiPmh\">Default OAI-PMH Repository</label>\n            </li>\n            <li>\n              <input id=\"retractFromYouTube\" type=\"checkbox\" class=\"configField\" value=\"true\" disabled=\"disabled\" />\n              <label for=\"retractFromYouTube\">YouTube</label>\n            </li>\n          </ul>\n        </fieldset>\n      </div>\n    \n  ",
        "operations": {
          "operation": [
            {
              "id": "defaults",
              "description": "Applying default configuration values",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": [
                  {
                    "key": "retractFromEngage",
                    "$": "true"
                  },
                  {
                    "key": "retractFromApi",
                    "$": "true"
                  },
                  {
                    "key": "retractFromYouTube",
                    "$": "false"
                  },
                  {
                    "key": "retractPreview",
                    "$": "true"
                  },
                  {
                    "key": "retractFromOaiPmh",
                    "$": "true"
                  },
                  {
                    "key": "retractFromAws",
                    "$": "true"
                  }
                ]
              }
            },
            {
              "id": "retract-engage",
              "description": "Retract recording from Engage",
              "fail-on-error": "true",
              "if": "${retractFromEngage}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none"
            },
            {
              "id": "retract-aws",
              "description": "Retract recording from AWS",
              "fail-on-error": "true",
              "if": "${retractFromAws}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none"
            },
            {
              "id": "retract-configure",
              "description": "Retract recording from external application",
              "fail-on-error": "true",
              "if": "${retractFromApi}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "channel-id",
                  "$": "api"
                }
              }
            },
            {
              "id": "retract-configure",
              "description": "Retract from internal publication channel",
              "fail-on-error": "true",
              "if": "${retractPreview}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "channel-id",
                  "$": "internal"
                }
              }
            },
            {
              "id": "retract-oaipmh",
              "description": "Retract recording from the default OAI-PMH repository",
              "fail-on-error": "true",
              "if": "${retractFromOaiPmh}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "repository",
                  "$": "default"
                }
              }
            },
            {
              "id": "retract-youtube",
              "description": "Retract recording from YouTube",
              "fail-on-error": "true",
              "if": "${retractFromYouTube}",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none"
            },
            {
              "id": "snapshot",
              "description": "Archiving state of retracted recording",
              "fail-on-error": "true",
              "exception-handler-workflow": "partial-error",
              "max-attempts": "1",
              "retry-strategy": "none"
            },
            {
              "id": "include",
              "description": "Remove temporary processing artifacts",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-cleanup"
                }
              }
            }
          ]
        }
      },
      {
        "id": "update-previews",
        "title": "Update previews",
        "tags": {
          "tag": "archive"
        },
        "description": "",
        "displayOrder": 5,
        "published": false,
        "configuration_panel": "",
        "operations": {
          "operation": [
            {
              "id": "include",
              "description": "Prepare the recording for further processing",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-work"
                }
              }
            },
            {
              "id": "include",
              "description": "Prepare preview versions of the recording",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-preview"
                }
              }
            },
            {
              "id": "snapshot",
              "description": "Archive preview information",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "source-tags",
                  "$": "archive"
                }
              }
            },
            {
              "id": "include",
              "description": "Remove temporary processing artifacts",
              "fail-on-error": "true",
              "max-attempts": "1",
              "retry-strategy": "none",
              "configurations": {
                "configuration": {
                  "key": "workflow-id",
                  "$": "partial-cleanup"
                }
              }
            }
          ]
        }
      }
    ]
  }
}