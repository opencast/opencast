(function(i,k,d){var j={},f,c,g;function b(l){if(j.logging&&i.console&&i.console.log){i.console.log(l)}}j.Util={};j.Util.backgroundImage=function(l){if(/data:image\/.*;base64,/i.test(l)||/^(-webkit|-moz|linear-gradient|-o-)/.test(l)){return l}if(l.toLowerCase().substr(0,5)==='url("'){l=l.substr(5);l=l.substr(0,l.length-2)}else{l=l.substr(4);l=l.substr(0,l.length-1)}return l};j.Util.Bounds=function h(l){var n,m={};if(l.getBoundingClientRect){n=l.getBoundingClientRect();m.top=n.top;m.bottom=n.bottom||(n.top+n.height);m.left=n.left;m.width=n.width||(n.right-n.left);m.height=n.height||(n.bottom-n.top);return m}};j.Util.getCSS=function(m,n){var o;function l(r,t){var p=m.runtimeStyle&&m.runtimeStyle[r],s,q=m.style;if(!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(t)&&/^-?\d/.test(t)){s=q.left;if(p){m.runtimeStyle.left=m.currentStyle.left}q.left=r==="fontSize"?"1em":(t||0);t=q.pixelLeft+"px";q.left=s;if(p){m.runtimeStyle.left=p}}if(!/^(thin|medium|thick)$/i.test(t)){return Math.round(parseFloat(t))+"px"}return t}if(i.getComputedStyle){if(f!==m){c=k.defaultView.getComputedStyle(m,null)}o=c[n];if(n==="backgroundPosition"){o=(o.split(",")[0]||"0 0").split(" ");o[0]=(o[0].indexOf("%")===-1)?l(n+"X",o[0]):o[0];o[1]=(o[1]===d)?o[0]:o[1];o[1]=(o[1].indexOf("%")===-1)?l(n+"Y",o[1]):o[1]}}else{if(m.currentStyle){if(n==="backgroundPosition"){o=[l(n+"X",m.currentStyle[n+"X"]),l(n+"Y",m.currentStyle[n+"Y"])]}else{o=l(n,m.currentStyle[n]);if(/^(border)/i.test(n)&&/^(medium|thin|thick)$/i.test(o)){switch(o){case"thin":o="1px";break;case"medium":o="0px";break;case"thick":o="5px";break}}}}}return o};j.Util.BackgroundPosition=function(n,o,q){var s=j.Util.getCSS(n,"backgroundPosition"),m,p,l,r;if(s.length===1){r=s;s=[];s[0]=r;s[1]=r}if(s[0].toString().indexOf("%")!==-1){l=(parseFloat(s[0])/100);p=((o.width*l)-(q.width*l))}else{p=parseInt(s[0],10)}if(s[1].toString().indexOf("%")!==-1){l=(parseFloat(s[1])/100);m=((o.height*l)-(q.height*l))}else{m=parseInt(s[1],10)}return{top:m,left:p}};j.Util.Extend=function(l,n){for(var m in l){if(l.hasOwnProperty(m)){n[m]=l[m]}}return n};j.Util.Children=function(n){var m;try{m=(n.nodeName&&n.nodeName.toUpperCase()==="IFRAME")?n.contentDocument||n.contentWindow.document:(function(p){var o=[];if(p!==null){(function(u,s){var t=u.length,r=0;if(typeof s.length==="number"){for(var q=s.length;r<q;r++){u[t++]=s[r]}}else{while(s[r]!==d){u[t++]=s[r++]}}u.length=t;return u})(o,p)}return o})(n.childNodes)}catch(l){b("html2canvas.Util.Children failed with exception: "+l.message);m=[]}return m};(function(){j.Generate={};var l=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z-]+)([\w\d\.\s,%\(\)]+)\)$/];j.Generate.parseGradient=function(r,m){var v,q,s=l.length,A,u,x,n,p,w;for(q=0;q<s;q+=1){A=r.match(l[q]);if(A){break}}if(A){switch(A[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":v={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]};x=A[2].match(/\w+/g);if(x){n=x.length;for(q=0;q<n;q+=1){switch(x[q]){case"top":v.y0=0;v.y1=m.height;break;case"right":v.x0=m.width;v.x1=0;break;case"bottom":v.y0=m.height;v.y1=0;break;case"left":v.x0=0;v.x1=m.width;break}}}if(v.x0===null&&v.x1===null){v.x0=v.x1=m.width/2}if(v.y0===null&&v.y1===null){v.y0=v.y1=m.height/2}x=A[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g);if(x){n=x.length;p=1/Math.max(n-1,1);for(q=0;q<n;q+=1){w=x[q].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/);if(w[2]){u=parseFloat(w[2]);if(w[3]==="%"){u/=100}else{u/=m.width}}else{u=q*p}v.colorStops.push({color:w[1],stop:u})}}break;case"-webkit-gradient":v={type:A[2]==="radial"?"circle":A[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]};x=A[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/);if(x){v.x0=(x[1]*m.width)/100;v.y0=(x[2]*m.height)/100;v.x1=(x[3]*m.width)/100;v.y1=(x[4]*m.height)/100}x=A[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g);if(x){n=x.length;for(q=0;q<n;q+=1){w=x[q].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/);u=parseFloat(w[2]);if(w[1]==="from"){u=0}if(w[1]==="to"){u=1}v.colorStops.push({color:w[3],stop:u})}}break;case"-moz-linear-gradient":v={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]};x=A[2].match(/(\d{1,3})%?\s(\d{1,3})%?/);if(x){v.x0=(x[1]*m.width)/100;v.y0=(x[2]*m.height)/100;v.x1=m.width-v.x0;v.y1=m.height-v.y0}x=A[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g);if(x){n=x.length;p=1/Math.max(n-1,1);for(q=0;q<n;q+=1){w=x[q].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/);if(w[2]){u=parseFloat(w[2]);if(w[3]){u/=100}}else{u=q*p}v.colorStops.push({color:w[1],stop:u})}}break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":v={type:"circle",x0:0,y0:0,x1:m.width,y1:m.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]};x=A[2].match(/(\d{1,3})%?\s(\d{1,3})%?/);if(x){v.cx=(x[1]*m.width)/100;v.cy=(x[2]*m.height)/100}x=A[3].match(/\w+/);w=A[4].match(/[a-z-]*/);if(x&&w){switch(w[0]){case"farthest-corner":case"cover":case"":var z=Math.sqrt(Math.pow(v.cx,2)+Math.pow(v.cy,2));var t=Math.sqrt(Math.pow(v.cx,2)+Math.pow(v.y1-v.cy,2));var y=Math.sqrt(Math.pow(v.x1-v.cx,2)+Math.pow(v.y1-v.cy,2));var o=Math.sqrt(Math.pow(v.x1-v.cx,2)+Math.pow(v.cy,2));v.rx=v.ry=Math.max(z,t,y,o);break;case"closest-corner":var z=Math.sqrt(Math.pow(v.cx,2)+Math.pow(v.cy,2));var t=Math.sqrt(Math.pow(v.cx,2)+Math.pow(v.y1-v.cy,2));var y=Math.sqrt(Math.pow(v.x1-v.cx,2)+Math.pow(v.y1-v.cy,2));var o=Math.sqrt(Math.pow(v.x1-v.cx,2)+Math.pow(v.cy,2));v.rx=v.ry=Math.min(z,t,y,o);break;case"farthest-side":if(x[0]==="circle"){v.rx=v.ry=Math.max(v.cx,v.cy,v.x1-v.cx,v.y1-v.cy)}else{v.type=x[0];v.rx=Math.max(v.cx,v.x1-v.cx);v.ry=Math.max(v.cy,v.y1-v.cy)}break;case"closest-side":case"contain":if(x[0]==="circle"){v.rx=v.ry=Math.min(v.cx,v.cy,v.x1-v.cx,v.y1-v.cy)}else{v.type=x[0];v.rx=Math.min(v.cx,v.x1-v.cx);v.ry=Math.min(v.cy,v.y1-v.cy)}break}}x=A[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g);if(x){n=x.length;p=1/Math.max(n-1,1);for(q=0;q<n;q+=1){w=x[q].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/);if(w[2]){u=parseFloat(w[2]);if(w[3]==="%"){u/=100}else{u/=m.width}}else{u=q*p}v.colorStops.push({color:w[1],stop:u})}}break}}return v};j.Generate.Gradient=function(m,n){var p=k.createElement("canvas"),A=p.getContext("2d"),y,z,s,t,r;p.width=n.width;p.height=n.height;y=j.Generate.parseGradient(m,n);r=new Image();if(y){if(y.type==="linear"){z=A.createLinearGradient(y.x0,y.y0,y.x1,y.y1);for(s=0,t=y.colorStops.length;s<t;s+=1){try{z.addColorStop(y.colorStops[s].stop,y.colorStops[s].color)}catch(u){b(["failed to add color stop: ",u,"; tried to add: ",y.colorStops[s],"; stop: ",s,"; in: ",m])}}A.fillStyle=z;A.fillRect(0,0,n.width,n.height);r.src=p.toDataURL()}else{if(y.type==="circle"){z=A.createRadialGradient(y.cx,y.cy,0,y.cx,y.cy,y.rx);for(s=0,t=y.colorStops.length;s<t;s+=1){try{z.addColorStop(y.colorStops[s].stop,y.colorStops[s].color)}catch(u){b(["failed to add color stop: ",u,"; tried to add: ",y.colorStops[s],"; stop: ",s,"; in: ",m])}}A.fillStyle=z;A.fillRect(0,0,n.width,n.height);r.src=p.toDataURL()}else{if(y.type==="ellipse"){var q=k.createElement("canvas"),o=q.getContext("2d"),x=Math.max(y.rx,y.ry),w=x*2,v;q.width=q.height=w;z=o.createRadialGradient(y.rx,y.ry,0,y.rx,y.ry,x);for(s=0,t=y.colorStops.length;s<t;s+=1){try{z.addColorStop(y.colorStops[s].stop,y.colorStops[s].color)}catch(u){b(["failed to add color stop: ",u,"; tried to add: ",y.colorStops[s],"; stop: ",s,"; in: ",m])}}o.fillStyle=z;o.fillRect(0,0,w,w);A.fillStyle=y.colorStops[s-1].color;A.fillRect(0,0,p.width,p.height);v=new Image();v.onload=function(){A.drawImage(v,y.cx-y.rx,y.cy-y.ry,2*y.rx,2*y.ry);r.src=p.toDataURL()};v.src=q.toDataURL()}}}}return r};j.Generate.ListAlpha=function(o){var n="",m;do{m=o%26;n=String.fromCharCode((m)+64)+n;o=o/26}while((o*26)>26);return n};j.Generate.ListRoman=function(q){var p=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],n=[1000,900,500,400,100,90,50,40,10,9,5,4,1],r="",o,m=p.length;if(q<=0||q>=4000){return q}for(o=0;o<m;o+=1){while(q>=n[o]){q-=n[o];r+=p[o]}}return r}})();j.Parse=function(m,M){i.scroll(0,0);var V={rangeBounds:false,svgRendering:M.svgRendering&&(function(){var af=new Image(),ag=k.createElement("canvas"),r=(ag.getContext===d)?false:ag.getContext("2d");if(r===false){return false}ag.width=ag.height=10;af.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{r.drawImage(af,0,0);ag.toDataURL()}catch(ah){return false}b("html2canvas: Parse: SVG powered rendering available");return true})()},A=((M.elements===d)?k.body:M.elements[0]),aa=false,n=0,p={},u=A.ownerDocument,R=new RegExp("("+M.ignoreElements+")"),Y=new RegExp("("+M.ignoreIds+")"),J=u.body,X,ad,x,Q,L,G,O,Z,B,T;function I(){return{width:Math.max(Math.max(u.body.scrollWidth,u.documentElement.scrollWidth),Math.max(u.body.offsetWidth,u.documentElement.offsetWidth),Math.max(u.body.clientWidth,u.documentElement.clientWidth)),height:Math.max(Math.max(u.body.scrollHeight,u.documentElement.scrollHeight),Math.max(u.body.offsetHeight,u.documentElement.offsetHeight),Math.max(u.body.clientHeight,u.documentElement.clientHeight))}}m=m||{};if(u.createRange){X=u.createRange();if(X.getBoundingClientRect){ad=u.createElement("boundtest");ad.style.height="123px";ad.style.display="block";J.appendChild(ad);X.selectNode(ad);x=X.getBoundingClientRect();Q=x.height;if(Q===123){V.rangeBounds=true}J.removeChild(ad)}}var F=j.Util.getCSS;function H(r,af){var ag=parseInt(F(r,af),10);return(isNaN(ag))?0:ag}function ac(ah,r,aj,ag,ai,af){if(af!=="transparent"){ah.setVariable("fillStyle",af);ah.fillRect(r,aj,ag,ai);n+=1}}function t(af,r){switch(r){case"lowercase":return af.toLowerCase();case"capitalize":return af.replace(/(^|\s|:|-|\(|\))([a-z])/g,function(ag,ai,ah){if(ag.length>0){return ai+ah.toUpperCase()}});case"uppercase":return af.toUpperCase();default:return af}}function s(r){return r.replace(/^\s*/g,"").replace(/\s*$/g,"")}function w(ag,ak){if(p[ag+"-"+ak]!==d){return p[ag+"-"+ak]}var r=u.createElement("div"),af=u.createElement("img"),ai=u.createElement("span"),aj,ah,al;r.style.visibility="hidden";r.style.fontFamily=ag;r.style.fontSize=ak;r.style.margin=0;r.style.padding=0;J.appendChild(r);af.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=";af.width=1;af.height=1;af.style.margin=0;af.style.padding=0;af.style.verticalAlign="baseline";ai.style.fontFamily=ag;ai.style.fontSize=ak;ai.style.margin=0;ai.style.padding=0;ai.appendChild(u.createTextNode("Hidden Text"));r.appendChild(ai);r.appendChild(af);aj=(af.offsetTop-ai.offsetTop)+1;r.removeChild(ai);r.appendChild(u.createTextNode("Hidden Text"));r.style.lineHeight="normal";af.style.verticalAlign="super";ah=(af.offsetTop-r.offsetTop)+1;al={baseline:aj,lineWidth:1,middle:ah};p[ag+"-"+ak]=al;J.removeChild(r);return al}function l(ag,r,ah,af){if(s(ag).length>0){af.fillText(ag,r,ah);n+=1}}function ab(af,aw,al){var az=al.ctx,aD=F(af,"fontFamily"),au=F(af,"fontSize"),aB=F(af,"color"),aG=F(af,"textDecoration"),aj=F(af,"textAlign"),r=F(af,"letterSpacing"),am,ar,aA,ap,ax,av=F(af,"fontWeight"),ao=F(af,"fontStyle"),aF=F(af,"fontVariant"),aC=false,ak,ah,ay=0,ai,aE,at,an,ag,aq;aw.nodeValue=t(aw.nodeValue,F(af,"textTransform"));ar=s(aw.nodeValue);if(ar.length>0){if(aG!=="none"){aA=w(aD,au)}aj=aj.replace(["-webkit-auto"],["auto"]);if(M.letterRendering===false&&/^(left|right|justify|auto)$/.test(aj)&&/^(normal|none)$/.test(r)){ap=aw.nodeValue.split(/(\b| )/)}else{ap=aw.nodeValue.split("")}switch(parseInt(av,10)){case 401:av="bold";break;case 400:av="normal";break}az.setVariable("fillStyle",aB);az.setVariable("font",ao+" "+aF+" "+av+" "+au+" "+aD);if(aC){az.setVariable("textAlign","right")}else{az.setVariable("textAlign","left")}ai=aw;for(aE=0,ax=ap.length;aE<ax;aE+=1){ah=null;if(V.rangeBounds){if(aG!=="none"||s(ap[aE]).length!==0){ah=ap[aE];if(u.createRange){at=u.createRange();at.setStart(aw,ay);at.setEnd(aw,ay+ah.length)}else{at=J.createTextRange()}if(at.getBoundingClientRect()){am=at.getBoundingClientRect()}else{am={}}}}else{if(typeof ai.nodeValue!=="string"){continue}ak=ai.splitText(ap[aE].length);an=ai.parentNode;ag=u.createElement("wrapper");aq=ai.cloneNode(true);ag.appendChild(ai.cloneNode(true));an.replaceChild(ag,ai);am=j.Util.Bounds(ag);ah=ai.nodeValue;ai=ak;an.replaceChild(aq,ag)}if(ah!==null){l(ah,am.left,am.bottom,az)}switch(aG){case"underline":ac(az,am.left,Math.round(am.top+aA.baseline+aA.lineWidth),am.width,1,aB);break;case"overline":ac(az,am.left,am.top,am.width,1,aB);break;case"line-through":ac(az,am.left,Math.ceil(am.top+aA.middle+aA.lineWidth),am.width,1,aB);break}ay+=ap[aE].length}}}function N(r,ai){var ah=u.createElement("boundelement"),af,ag;ah.style.display="inline";af=r.style.listStyleType;r.style.listStyleType="none";ah.appendChild(u.createTextNode(ai));r.insertBefore(ah,r.firstChild);ag=j.Util.Bounds(ah);r.removeChild(ah);r.style.listStyleType=af;return ag}function D(af){var r=-1,ag=1,ah=af.parentNode.childNodes;if(af.parentNode){while(ah[++r]!==af){if(ah[r].nodeType===1){ag++}}return ag}else{return -1}}function S(af,am,ah){var ag=F(af,"listStylePosition"),an,al,ak=F(af,"listStyleType"),ai,ao,r,aj=F(af,"fontWeight");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(ak)){ai=D(af);switch(ak){case"decimal":ao=ai;break;case"decimal-leading-zero":if(ai.toString().length===1){ao=ai="0"+ai.toString()}else{ao=ai.toString()}break;case"upper-roman":ao=j.Generate.ListRoman(ai);break;case"lower-roman":ao=j.Generate.ListRoman(ai).toLowerCase();break;case"lower-alpha":ao=j.Generate.ListAlpha(ai).toLowerCase();break;case"upper-alpha":ao=j.Generate.ListAlpha(ai);break}ao+=". ";r=N(af,ao);switch(aj){case 401:aj="bold";break;case 400:aj="normal";break}G.setVariable("fillStyle",F(af,"color"));G.setVariable("font",F(af,"fontVariant")+" "+aj+" "+F(af,"fontStyle")+" "+F(af,"fontSize")+" "+F(af,"fontFamily"));if(ag==="inside"){G.setVariable("textAlign","left");an=ah.left}else{return}al=r.bottom;l(ao,an,al,G)}}function E(af){var r=m[af];if(r&&r.succeeded===true){return r.img}else{return false}}function v(ah,aj){var r=Math.max(ah.left,aj.left),ai=Math.max(ah.top,aj.top),af=Math.min((ah.left+ah.width),(aj.left+aj.width)),ag=Math.min((ah.top+ah.height),(aj.top+aj.height));return{left:r,top:ai,width:af-r,height:ag-ai}}function U(ag,r){var af;if(!r){af=a(0);return af}if(ag!=="auto"){aa=true;af=a(ag);r.children.push(af);return af}return r}function z(ag,au,af,ah){var aq=af.left,ap=af.top,at=af.width,aj=af.height,r,ar,an,al,ao,ai,am,ak=(function(aw){var ay=[],ax=["Top","Right","Bottom","Left"],av;for(av=0;av<4;av+=1){ay.push({width:H(aw,"border"+ax[av]+"Width"),color:F(aw,"border"+ax[av]+"Color")})}return ay}(ag));for(r=0;r<4;r+=1){ar=ak[r];if(ar.width>0){an=aq;al=ap;ao=at;ai=aj-(ak[2].width);switch(r){case 0:ai=ak[0].width;break;case 1:an=aq+at-(ak[1].width);ao=ak[1].width;break;case 2:al=(al+aj)-(ak[2].width);ai=ak[2].width;break;case 3:ao=ak[3].width;break}am={left:an,top:al,width:ao,height:ai};if(ah){am=v(am,ah)}if(am.width>0&&am.height>0){ac(au,an,al,am.width,am.height,ar.color)}}}return ak}function W(ag,r,am){var an=u.createElement("valuewrap"),ao=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"],aj,ai,ah,al,af;for(aj=0,al=ao.length;aj<al;aj+=1){af=ao[aj];try{an.style[af]=F(ag,af)}catch(ak){b("html2canvas: Parse: Exception caught in renderFormValue: "+ak.message)}}an.style.borderColor="black";an.style.borderStyle="solid";an.style.display="block";an.style.position="absolute";if(/^(submit|reset|button|text|password)$/.test(ag.type)||ag.nodeName==="SELECT"){an.style.lineHeight=F(ag,"height")}an.style.top=r.top+"px";an.style.left=r.left+"px";if(ag.nodeName==="SELECT"){ai=ag.options[ag.selectedIndex].text}else{ai=ag.value}ah=u.createTextNode(ai);an.appendChild(ah);J.appendChild(an);ab(ag,ah,am);J.removeChild(an)}function C(al,af,aj,ai,ak,ag,an,am,r,ah){al.drawImage(af,aj,ai,ak,ag,an,am,r,ah);n+=1}function P(an,aj,al,ak,af,am,ah,r){var ai=0,ag=0;if(ah-al>0){ai=ah-al}if(r-ak>0){ag=r-ak}C(an,aj,ai,ag,af-ai,am-ag,al+ai,ak+ag,af-ai,am-ag)}function o(an,ag,ai,ak,aj,al,ah){var am,r=Math.min(ag.width,al),af;ai.top=ai.top-Math.ceil(ai.top/ag.height)*ag.height;for(af=(aj+ai.top);af<ah+aj;){if(Math.floor(af+ag.height)>ah+aj){am=(ah+aj)-af}else{am=ag.height}P(an,ag,ak+ai.left,af,r,am,ak,aj);af=Math.floor(af+ag.height)}}function q(an,ag,ai,ak,aj,al,ah){var am=Math.min(ag.height,ah),r,af;ai.left=ai.left-Math.ceil(ai.left/ag.width)*ag.width;for(af=(ak+ai.left);af<al+ak;){if(Math.floor(af+ag.width)>al+ak){r=(al+ak)-af}else{r=ag.width}P(an,ag,af,(aj+ai.top),r,am,ak,aj);af=Math.floor(af+ag.width)}}function ae(af,r,av){var ak=F(af,"backgroundImage"),aq=F(af,"backgroundRepeat").split(",")[0],ai,an,ag,ah,am,al,ap,ao,au,aj,ar,at;if(!/data:image\/.*;base64,/i.test(ak)&&!/^(-webkit|-moz|linear-gradient|-o-)/.test(ak)){ak=ak.split(",")[0]}if(typeof ak!=="undefined"&&/^(1|none)$/.test(ak)===false){ak=j.Util.backgroundImage(ak);ai=E(ak);an=j.Util.BackgroundPosition(af,r,ai);if(ai){switch(aq){case"repeat-x":q(av,ai,an,r.left,r.top,r.width,r.height);break;case"repeat-y":o(av,ai,an,r.left,r.top,r.width,r.height);break;case"no-repeat":ah=r.width-an.left;au=r.height-an.top;am=an.left;al=an.top;ap=an.left+r.left;ao=an.top+r.top;if(am<0){am=Math.abs(am);ap+=am;ah=Math.min(r.width,ai.width-am)}else{ah=Math.min(ah,ai.width);am=0}if(al<0){al=Math.abs(al);ao+=al;au=Math.min(r.height,ai.height-al)}else{au=Math.min(au,ai.height);al=0}if(au>0&&ah>0){C(av,ai,am,al,ah,au,ap,ao,ah,au)}break;default:an.top=an.top-Math.ceil(an.top/ai.height)*ai.height;for(ag=(r.top+an.top);ag<r.height+r.top;){aj=Math.min(ai.height,(r.height+r.top)-ag);if(Math.floor(ag+ai.height)>aj+ag){ar=(aj+ag)-ag}else{ar=ai.height}if(ag<r.top){at=r.top-ag;ag=r.top}else{at=0}q(av,ai,an,r.left,ag,r.width,ar);if(at>0){an.top+=at}ag=Math.floor(ag+ai.height)-at}break}}else{b("html2canvas: Error loading background:"+ak)}}}function y(ah,ai){var an=j.Util.Bounds(ah),ar=an.left,aq=an.top,au=an.width,ay=an.height,av,af=F(ah,"backgroundColor"),at=F(ah,"position"),ap,aj=F(ah,"opacity"),am,al,ak,ax,aw,ag,aA,az,r,ao;if(!ai){O=I();ai={opacity:1}}else{O={}}ap=U(F(ah,"zIndex"),ai.zIndex);am={ctx:e(O.width||au,O.height||ay),zIndex:ap,opacity:aj*ai.opacity,cssPosition:at};if(ai.clip){am.clip=j.Util.Extend({},ai.clip)}if(M.useOverflow===true&&/(hidden|scroll|auto)/.test(F(ah,"overflow"))===true&&/(BODY)/i.test(ah.nodeName)===false){if(am.clip){am.clip=v(am.clip,an)}else{am.clip=an}}al=ap.children.push(am);ax=ap.children[al-1].ctx;ax.setVariable("globalAlpha",am.opacity);ak=z(ah,ax,an,false);am.borders=ak;if(R.test(ah.nodeName)&&M.iframeDefault!=="transparent"){if(M.iframeDefault==="default"){af="#efefef"}else{af=M.iframeDefault}}aw={left:ar+ak[3].width,top:aq+ak[0].width,width:au-(ak[1].width+ak[3].width),height:ay-(ak[0].width+ak[2].width)};if(am.clip){aw=v(aw,am.clip)}if(aw.height>0&&aw.width>0){ac(ax,aw.left,aw.top,aw.width,aw.height,af);ae(ah,aw,ax)}switch(ah.nodeName){case"IMG":ag=ah.getAttribute("src");av=E(ag);if(av){aA=H(ah,"paddingLeft");az=H(ah,"paddingTop");r=H(ah,"paddingRight");ao=H(ah,"paddingBottom");C(ax,av,0,0,av.width,av.height,ar+aA+ak[3].width,aq+az+ak[0].width,an.width-(ak[1].width+ak[3].width+aA+r),an.height-(ak[0].width+ak[2].width+az+ao))}else{b("html2canvas: Error loading <img>:"+ag)}break;case"INPUT":if(/^(text|url|email|submit|button|reset)$/.test(ah.type)&&ah.value.length>0){W(ah,an,am)}break;case"TEXTAREA":if(ah.value.length>0){W(ah,an,am)}break;case"SELECT":if(ah.options.length>0){W(ah,an,am)}break;case"LI":S(ah,am,aw);break;case"CANVAS":aA=H(ah,"paddingLeft");az=H(ah,"paddingTop");r=H(ah,"paddingRight");ao=H(ah,"paddingBottom");C(ax,ah,0,0,ah.width,ah.height,ar+aA+ak[3].width,aq+az+ak[0].width,an.width-(ak[1].width+ak[3].width+aA+r),an.height-(ak[0].width+ak[2].width+az+ao));break}return ap.children[al-1]}function K(ag,r){if(F(ag,"display")!=="none"&&F(ag,"visibility")!=="hidden"){r=y(ag,r)||r;G=r.ctx;if(!R.test(ag.nodeName)&&!Y.test(ag.id)){var aj=j.Util.Children(ag),af,ah,ai;for(af=0,ai=aj.length;af<ai;af+=1){ah=aj[af];if(ah.nodeType===1){K(ah,r)}else{if(ah.nodeType===3){ab(ag,ah,r)}}}}}}L=y(A,null);if(V.svgRendering){(function(r){var af=new Image(),ah=I(),ag="";function ai(ao){var an=j.Util.Children(ao),ak=an.length,aj,al,ap,aq,am;for(am=0;am<ak;am+=1){aq=an[am];if(aq.nodeType===3){ag+=aq.nodeValue.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")}else{if(aq.nodeType===1){if(!/^(script|meta|title)$/.test(aq.nodeName.toLowerCase())){ag+="<"+aq.nodeName.toLowerCase();if(aq.hasAttributes()){aj=aq.attributes;ap=aj.length;for(al=0;al<ap;al+=1){ag+=" "+aj[al].name+'="'+aj[al].value+'"'}}ag+=">";ai(aq);ag+="</"+aq.nodeName.toLowerCase()+">"}}}}}ai(r);af.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='"+ah.width+"' height='"+ah.height+"'>","<foreignObject width='"+ah.width+"' height='"+ah.height+"'>","<html xmlns='http://www.w3.org/1999/xhtml' style='margin:0;'>",ag.replace(/\#/g,"%23"),"</html>","</foreignObject>","</svg>"].join("");af.onload=function(){L.svgRender=af}})(k.documentElement)}for(Z=0,B=A.children,T=B.length;Z<T;Z+=1){K(B[Z],L)}L.backgroundColor=F(k.documentElement,"backgroundColor");return L};function a(l){return{zindex:l,children:[]}}j.Preload=function(m){var t={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:false},z,A,y,o=0,l=m.elements[0]||k.body,C=l.ownerDocument,s=C.images,u=s.length,p=C.createElement("a"),r=(function(D){return(D.crossOrigin!==d)})(new Image()),w;p.href=i.location.href;z=p.protocol+p.host;function B(E){p.href=E;p.href=p.href;var D=p.protocol+p.host;return(D===z)}function n(){b("html2canvas: start: images: "+t.numLoaded+" / "+t.numTotal+" (failed: "+t.numFailed+")");if(!t.firstRun&&t.numLoaded>=t.numTotal){b("Finished loading images: # "+t.numTotal+" (failed: "+t.numFailed+")");if(typeof m.complete==="function"){m.complete(t)}}}function v(G,F,H){var D,I=m.proxy,E;p.href=G;G=p.href;D="html2canvas_"+(o++);H.callbackname=D;if(I.indexOf("?")>-1){I+="&"}else{I+="?"}I+="url="+encodeURIComponent(G)+"&callback="+D;E=C.createElement("script");i[D]=function(J){if(J.substring(0,6)==="error:"){H.succeeded=false;t.numLoaded++;t.numFailed++;n()}else{x(F,H);F.src=J}i[D]=d;try{delete i[D]}catch(K){}E.parentNode.removeChild(E);E=null;delete H.script;delete H.callbackname};E.setAttribute("type","text/javascript");E.setAttribute("src",I);H.script=E;i.document.body.appendChild(E)}function q(E){var F=j.Util.Children(E),H,K,D,I,G=false;try{var J=F.length;for(H=0;H<J;H+=1){q(F[H])}}catch(L){}try{G=E.nodeType}catch(M){G=false;b("html2canvas: failed to access some element's nodeType - Exception: "+M.message)}if(G===1||G===d){try{K=j.Util.getCSS(E,"backgroundImage")}catch(L){b("html2canvas: failed to get background-image - Exception: "+L.message)}if(K&&K!=="1"&&K!=="none"){if(/^(-webkit|-o|-moz|-ms|linear)-/.test(K)){I=j.Generate.Gradient(K,j.Util.Bounds(E));if(I!==d){t[K]={img:I,succeeded:true};t.numTotal++;t.numLoaded++;n()}}else{D=j.Util.backgroundImage(K.match(/data:image\/.*;base64,/i)?K:K.split(",")[0]);A.loadImage(D)}}}}function x(D,E){D.onload=function(){if(E.timer!==d){i.clearTimeout(E.timer)}t.numLoaded++;E.succeeded=true;D.onerror=D.onload=null;n()};D.onerror=function(){if(D.crossOrigin==="anonymous"){i.clearTimeout(E.timer);if(m.proxy){var F=D.src;D=new Image();E.img=D;D.src=F;v(D.src,D,E);return}}t.numLoaded++;t.numFailed++;E.succeeded=false;D.onerror=D.onload=null;n()}}A={loadImage:function(F){var D,E;if(F&&t[F]===d){D=new Image();if(F.match(/data:image\/.*;base64,/i)){D.src=F.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,"");E=t[F]={img:D};t.numTotal++;x(D,E)}else{if(B(F)||m.allowTaint===true){E=t[F]={img:D};t.numTotal++;x(D,E);D.src=F}else{if(r&&!m.allowTaint&&m.useCORS){D.crossOrigin="anonymous";E=t[F]={img:D};t.numTotal++;x(D,E);D.src=F;D.customComplete=function(){if(!this.img.complete){this.timer=i.setTimeout(this.img.customComplete,100)}else{this.img.onerror()}}.bind(E);D.customComplete()}else{if(m.proxy){E=t[F]={img:D};t.numTotal++;v(F,D,E)}}}}}},cleanupDOM:function(F){var D,G;if(!t.cleanupDone){if(F&&typeof F==="string"){b("html2canvas: Cleanup because: "+F)}else{b("html2canvas: Cleanup after timeout: "+m.timeout+" ms.")}for(G in t){if(t.hasOwnProperty(G)){D=t[G];if(typeof D==="object"&&D.callbackname&&D.succeeded===d){i[D.callbackname]=d;try{delete i[D.callbackname]}catch(E){}if(D.script&&D.script.parentNode){D.script.setAttribute("src","about:blank");D.script.parentNode.removeChild(D.script)}t.numLoaded++;t.numFailed++;b("html2canvas: Cleaned up failed img: '"+G+"' Steps: "+t.numLoaded+" / "+t.numTotal)}}}if(i.stop!==d){i.stop()}else{if(k.execCommand!==d){k.execCommand("Stop",false)}}if(k.close!==d){k.close()}t.cleanupDone=true;if(!(F&&typeof F==="string")){n()}}},renderingDone:function(){if(w){i.clearTimeout(w)}}};if(m.timeout>0){w=i.setTimeout(A.cleanupDOM,m.timeout)}b("html2canvas: Preload starts: finding background-images");t.firstRun=true;q(l);b("html2canvas: Preload: Finding images");for(y=0;y<u;y+=1){A.loadImage(s[y].getAttribute("src"))}t.firstRun=false;b("html2canvas: Preload: Done.");if(t.numTotal===t.numLoaded){n()}return A};function e(m,l){var n=[];return{storage:n,width:m,height:l,fillRect:function(){n.push({type:"function",name:"fillRect","arguments":arguments})},drawImage:function(){n.push({type:"function",name:"drawImage","arguments":arguments})},fillText:function(){n.push({type:"function",name:"fillText","arguments":arguments})},setVariable:function(o,p){n.push({type:"variable",name:o,"arguments":p})}}}j.Renderer=function(n,m){var l=[];function o(x){var q=[],y=[],z=x.children,A,u,p,B,w,t,v,r;for(A=0,w=z.length;A<w;A+=1){t=z[A];if(t.children&&t.children.length>0){q.push(t);y.push(t.zindex)}else{l.push(t)}}y.sort(function(C,s){return C-s});for(u=0,p=y.length;u<p;u+=1){B=y[u];for(v=0,r=q.length;v<=r;v+=1){if(q[v].zindex===B){t=q.splice(v,1);o(t[0]);break}}}}o(n.zIndex);if(typeof m._renderer._create!=="function"){throw new Error("Invalid renderer defined")}return m._renderer._create(n,m,k,l,j)};g=function(q,o){var l,n,m={logging:false,elements:q,proxy:"http://html2canvas.appspot.com/",timeout:0,useCORS:false,allowTaint:false,svgRendering:false,iframeDefault:"default",ignoreElements:"IFRAME|OBJECT|PARAM",ignoreIds:"",useOverflow:true,letterRendering:false,flashcanvas:d,width:null,height:null,taintTest:true,renderer:"Canvas"},p;m=j.Util.Extend(o,m);if(typeof m.renderer==="string"&&j.Renderer[m.renderer]!==d){m._renderer=j.Renderer[m.renderer](m)}else{if(typeof m.renderer==="function"){m._renderer=m.renderer(m)}else{throw ("Unknown renderer")}}j.logging=m.logging;m.complete=function(r){if(typeof m.onpreloaded==="function"){if(m.onpreloaded(r)===false){return}}l=j.Parse(r,m);if(typeof m.onparsed==="function"){if(m.onparsed(l)===false){return}}n=j.Renderer(l,m);if(typeof m.onrendered==="function"){m.onrendered(n)}};i.setTimeout(function(){j.Preload(m)},0);return{render:function(r,s){return j.Renderer(r,j.Util.Extend(s,m))},parse:function(r,s){return j.Parse(r,j.Util.Extend(s,m))},preload:function(r){return j.Preload(j.Util.Extend(r,m))},log:b}};g.log=b;g.Renderer={Canvas:d};j.Renderer.Canvas=function(t){t=t||{};var s=k,m=t.canvas||s.createElement("canvas"),p=false,l=false,q=false,n,o=2880;if(m.getContext){b("html2canvas: Renderer: using canvas renderer");q=true}else{if(t.flashcanvas!==d){p=true;b("html2canvas: Renderer: canvas not available, using flashcanvas");var r=s.createElement("script");r.src=t.flashcanvas;r.onload=(function(u,v){var w;if(u.onload===d){if(u.onreadystatechange!==d){w=function(){if(u.readyState!=="loaded"&&u.readyState!=="complete"){i.setTimeout(w,250)}else{v()}};i.setTimeout(w,250)}else{b("html2canvas: Renderer: Can't track when flashcanvas is loaded")}}else{return v}})(r,function(){if(typeof i.FlashCanvas!=="undefined"){b("html2canvas: Renderer: Flashcanvas initialized");i.FlashCanvas.initElement(m);q=true;if(l!==false){n._create.apply(null,l)}}});s.body.appendChild(r)}}n={_create:function(E,x,N,I,G){if(!q){l=arguments;return m}var H=m.getContext("2d"),w,J,v,M,z,A,F=k.createElement("canvas"),C=(F.getContext!==d),B,D,K=(C)?F.getContext("2d"):{},u=[],y;m.width=m.style.width=(!p)?x.width||E.ctx.width:Math.min(o,(x.width||E.ctx.width));m.height=m.style.height=(!p)?x.height||E.ctx.height:Math.min(o,(x.height||E.ctx.height));y=H.fillStyle;H.fillStyle=E.backgroundColor;H.fillRect(0,0,m.width,m.height);H.fillStyle=y;if(x.svgRendering&&E.svgRender!==d){H.drawImage(E.svgRender,0,0)}else{for(J=0,v=I.length;J<v;J+=1){w=I.splice(0,1)[0];w.canvasPosition=w.canvasPosition||{};H.textBaseline="bottom";if(w.clip){H.save();H.beginPath();H.rect(w.clip.left,w.clip.top,w.clip.width,w.clip.height);H.clip()}if(w.ctx.storage){for(M=0,B=w.ctx.storage.length;M<B;M+=1){D=w.ctx.storage[M];switch(D.type){case"variable":H[D.name]=D["arguments"];break;case"function":if(D.name==="fillRect"){if(!p||D["arguments"][0]+D["arguments"][2]<o&&D["arguments"][1]+D["arguments"][3]<o){H.fillRect.apply(H,D["arguments"])}}else{if(D.name==="fillText"){if(!p||D["arguments"][1]<o&&D["arguments"][2]<o){H.fillText.apply(H,D["arguments"])}}else{if(D.name==="drawImage"){if(D["arguments"][8]>0&&D["arguments"][7]){if(C&&x.taintTest){if(u.indexOf(D["arguments"][0].src)===-1){K.drawImage(D["arguments"][0],0,0);try{K.getImageData(0,0,1,1)}catch(L){F=N.createElement("canvas");K=F.getContext("2d");continue}u.push(D["arguments"][0].src)}}H.drawImage.apply(H,D["arguments"])}}}}break;default:}}}if(w.clip){H.restore()}}}b("html2canvas: Renderer: Canvas renderer done - returning canvas obj");v=x.elements.length;if(v===1){if(typeof x.elements[0]==="object"&&x.elements[0].nodeName!=="BODY"&&p===false){A=G.Util.Bounds(x.elements[0]);z=N.createElement("canvas");z.width=A.width;z.height=A.height;H=z.getContext("2d");H.drawImage(m,A.left,A.top,A.width,A.height,0,0,A.width,A.height);m=null;return z}}return m}};return n};i.html2canvas=g}(window,document));
